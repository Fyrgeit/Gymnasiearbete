(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Ko(t,e){const n=Object.create(null),s=t.split(",");for(let r=0;r<s.length;r++)n[s[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const nd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sd=Ko(nd);function Uc(t){return!!t||t===""}function zo(t){if(B(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=Te(s)?od(s):zo(s);if(r)for(const i in r)e[i]=r[i]}return e}else{if(Te(t))return t;if(ue(t))return t}}const rd=/;(?![^(]*\))/g,id=/:(.+)/;function od(t){const e={};return t.split(rd).forEach(n=>{if(n){const s=n.split(id);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Nn(t){let e="";if(Te(t))e=t;else if(B(t))for(let n=0;n<t.length;n++){const s=Nn(t[n]);s&&(e+=s+" ")}else if(ue(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function ad(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=br(t[s],e[s]);return n}function br(t,e){if(t===e)return!0;let n=cl(t),s=cl(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=ms(t),s=ms(e),n||s)return t===e;if(n=B(t),s=B(e),n||s)return n&&s?ad(t,e):!1;if(n=ue(t),s=ue(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!br(t[o],e[o]))return!1}}return String(t)===String(e)}const ae=t=>Te(t)?t:t==null?"":B(t)||ue(t)&&(t.toString===Hc||!H(t.toString))?JSON.stringify(t,Bc,2):String(t),Bc=(t,e)=>e&&e.__v_isRef?Bc(t,e.value):xn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r])=>(n[`${s} =>`]=r,n),{})}:$c(e)?{[`Set(${e.size})`]:[...e.values()]}:ue(e)&&!B(e)&&!qc(e)?String(e):e,ee={},kn=[],ot=()=>{},ld=()=>!1,cd=/^on[^a-z]/,Kr=t=>cd.test(t),Wo=t=>t.startsWith("onUpdate:"),Le=Object.assign,Go=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ud=Object.prototype.hasOwnProperty,Q=(t,e)=>ud.call(t,e),B=Array.isArray,xn=t=>Ps(t)==="[object Map]",$c=t=>Ps(t)==="[object Set]",cl=t=>Ps(t)==="[object Date]",H=t=>typeof t=="function",Te=t=>typeof t=="string",ms=t=>typeof t=="symbol",ue=t=>t!==null&&typeof t=="object",jc=t=>ue(t)&&H(t.then)&&H(t.catch),Hc=Object.prototype.toString,Ps=t=>Hc.call(t),hd=t=>Ps(t).slice(8,-1),qc=t=>Ps(t)==="[object Object]",Qo=t=>Te(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,dr=Ko(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zr=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},fd=/-(\w)/g,bt=zr(t=>t.replace(fd,(e,n)=>n?n.toUpperCase():"")),dd=/\B([A-Z])/g,Wn=zr(t=>t.replace(dd,"-$1").toLowerCase()),Wr=zr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ri=zr(t=>t?`on${Wr(t)}`:""),Ir=(t,e)=>!Object.is(t,e),pr=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Tr=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},to=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ul;const pd=()=>ul||(ul=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let dt;class gd{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&dt&&(this.parent=dt,this.index=(dt.scopes||(dt.scopes=[])).push(this)-1)}run(e){if(this.active){const n=dt;try{return dt=this,e()}finally{dt=n}}}on(){dt=this}off(){dt=this.parent}stop(e){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function md(t,e=dt){e&&e.active&&e.effects.push(t)}const Yo=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Kc=t=>(t.w&jt)>0,zc=t=>(t.n&jt)>0,yd=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=jt},vd=t=>{const{deps:e}=t;if(e.length){let n=0;for(let s=0;s<e.length;s++){const r=e[s];Kc(r)&&!zc(r)?r.delete(t):e[n++]=r,r.w&=~jt,r.n&=~jt}e.length=n}},no=new WeakMap;let os=0,jt=1;const so=30;let rt;const fn=Symbol(""),ro=Symbol("");class Xo{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,md(this,s)}run(){if(!this.active)return this.fn();let e=rt,n=Ft;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=rt,rt=this,Ft=!0,jt=1<<++os,os<=so?yd(this):hl(this),this.fn()}finally{os<=so&&vd(this),jt=1<<--os,rt=this.parent,Ft=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){rt===this?this.deferStop=!0:this.active&&(hl(this),this.onStop&&this.onStop(),this.active=!1)}}function hl(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Ft=!0;const Wc=[];function Gn(){Wc.push(Ft),Ft=!1}function Qn(){const t=Wc.pop();Ft=t===void 0?!0:t}function Ge(t,e,n){if(Ft&&rt){let s=no.get(t);s||no.set(t,s=new Map);let r=s.get(n);r||s.set(n,r=Yo()),Gc(r)}}function Gc(t,e){let n=!1;os<=so?zc(t)||(t.n|=jt,n=!Kc(t)):n=!t.has(rt),n&&(t.add(rt),rt.deps.push(t))}function Dt(t,e,n,s,r,i){const o=no.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&B(t))o.forEach((l,c)=>{(c==="length"||c>=s)&&a.push(l)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":B(t)?Qo(n)&&a.push(o.get("length")):(a.push(o.get(fn)),xn(t)&&a.push(o.get(ro)));break;case"delete":B(t)||(a.push(o.get(fn)),xn(t)&&a.push(o.get(ro)));break;case"set":xn(t)&&a.push(o.get(fn));break}if(a.length===1)a[0]&&io(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);io(Yo(l))}}function io(t,e){const n=B(t)?t:[...t];for(const s of n)s.computed&&fl(s);for(const s of n)s.computed||fl(s)}function fl(t,e){(t!==rt||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const wd=Ko("__proto__,__v_isRef,__isVue"),Qc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ms)),Ed=Jo(),bd=Jo(!1,!0),Id=Jo(!0),dl=Td();function Td(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=J(this);for(let i=0,o=this.length;i<o;i++)Ge(s,"get",i+"");const r=s[e](...n);return r===-1||r===!1?s[e](...n.map(J)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Gn();const s=J(this)[e].apply(this,n);return Qn(),s}}),t}function Jo(t=!1,e=!1){return function(s,r,i){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&i===(t?e?Ud:eu:e?Zc:Jc).get(s))return s;const o=B(s);if(!t&&o&&Q(dl,r))return Reflect.get(dl,r,i);const a=Reflect.get(s,r,i);return(ms(r)?Qc.has(r):wd(r))||(t||Ge(s,"get",r),e)?a:Ue(a)?o&&Qo(r)?a:a.value:ue(a)?t?tu(a):ta(a):a}}const _d=Yc(),Cd=Yc(!0);function Yc(t=!1){return function(n,s,r,i){let o=n[s];if(ys(o)&&Ue(o)&&!Ue(r))return!1;if(!t&&(!oo(r)&&!ys(r)&&(o=J(o),r=J(r)),!B(n)&&Ue(o)&&!Ue(r)))return o.value=r,!0;const a=B(n)&&Qo(s)?Number(s)<n.length:Q(n,s),l=Reflect.set(n,s,r,i);return n===J(i)&&(a?Ir(r,o)&&Dt(n,"set",s,r):Dt(n,"add",s,r)),l}}function Ad(t,e){const n=Q(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&n&&Dt(t,"delete",e,void 0),s}function Sd(t,e){const n=Reflect.has(t,e);return(!ms(e)||!Qc.has(e))&&Ge(t,"has",e),n}function Dd(t){return Ge(t,"iterate",B(t)?"length":fn),Reflect.ownKeys(t)}const Xc={get:Ed,set:_d,deleteProperty:Ad,has:Sd,ownKeys:Dd},Nd={get:Id,set(t,e){return!0},deleteProperty(t,e){return!0}},kd=Le({},Xc,{get:bd,set:Cd}),Zo=t=>t,Gr=t=>Reflect.getPrototypeOf(t);function tr(t,e,n=!1,s=!1){t=t.__v_raw;const r=J(t),i=J(e);n||(e!==i&&Ge(r,"get",e),Ge(r,"get",i));const{has:o}=Gr(r),a=s?Zo:n?ra:sa;if(o.call(r,e))return a(t.get(e));if(o.call(r,i))return a(t.get(i));t!==r&&t.get(e)}function nr(t,e=!1){const n=this.__v_raw,s=J(n),r=J(t);return e||(t!==r&&Ge(s,"has",t),Ge(s,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function sr(t,e=!1){return t=t.__v_raw,!e&&Ge(J(t),"iterate",fn),Reflect.get(t,"size",t)}function pl(t){t=J(t);const e=J(this);return Gr(e).has.call(e,t)||(e.add(t),Dt(e,"add",t,t)),this}function gl(t,e){e=J(e);const n=J(this),{has:s,get:r}=Gr(n);let i=s.call(n,t);i||(t=J(t),i=s.call(n,t));const o=r.call(n,t);return n.set(t,e),i?Ir(e,o)&&Dt(n,"set",t,e):Dt(n,"add",t,e),this}function ml(t){const e=J(this),{has:n,get:s}=Gr(e);let r=n.call(e,t);r||(t=J(t),r=n.call(e,t)),s&&s.call(e,t);const i=e.delete(t);return r&&Dt(e,"delete",t,void 0),i}function yl(){const t=J(this),e=t.size!==0,n=t.clear();return e&&Dt(t,"clear",void 0,void 0),n}function rr(t,e){return function(s,r){const i=this,o=i.__v_raw,a=J(o),l=e?Zo:t?ra:sa;return!t&&Ge(a,"iterate",fn),o.forEach((c,u)=>s.call(r,l(c),l(u),i))}}function ir(t,e,n){return function(...s){const r=this.__v_raw,i=J(r),o=xn(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...s),u=n?Zo:e?ra:sa;return!e&&Ge(i,"iterate",l?ro:fn),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Lt(t){return function(...e){return t==="delete"?!1:this}}function xd(){const t={get(i){return tr(this,i)},get size(){return sr(this)},has:nr,add:pl,set:gl,delete:ml,clear:yl,forEach:rr(!1,!1)},e={get(i){return tr(this,i,!1,!0)},get size(){return sr(this)},has:nr,add:pl,set:gl,delete:ml,clear:yl,forEach:rr(!1,!0)},n={get(i){return tr(this,i,!0)},get size(){return sr(this,!0)},has(i){return nr.call(this,i,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:rr(!0,!1)},s={get(i){return tr(this,i,!0,!0)},get size(){return sr(this,!0)},has(i){return nr.call(this,i,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:rr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=ir(i,!1,!1),n[i]=ir(i,!0,!1),e[i]=ir(i,!1,!0),s[i]=ir(i,!0,!0)}),[t,n,e,s]}const[Md,Rd,Od,Ld]=xd();function ea(t,e){const n=e?t?Ld:Od:t?Rd:Md;return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Q(n,r)&&r in s?n:s,r,i)}const Pd={get:ea(!1,!1)},Fd={get:ea(!1,!0)},Vd={get:ea(!0,!1)},Jc=new WeakMap,Zc=new WeakMap,eu=new WeakMap,Ud=new WeakMap;function Bd(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $d(t){return t.__v_skip||!Object.isExtensible(t)?0:Bd(hd(t))}function ta(t){return ys(t)?t:na(t,!1,Xc,Pd,Jc)}function jd(t){return na(t,!1,kd,Fd,Zc)}function tu(t){return na(t,!0,Nd,Vd,eu)}function na(t,e,n,s,r){if(!ue(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const o=$d(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return r.set(t,a),a}function Mn(t){return ys(t)?Mn(t.__v_raw):!!(t&&t.__v_isReactive)}function ys(t){return!!(t&&t.__v_isReadonly)}function oo(t){return!!(t&&t.__v_isShallow)}function nu(t){return Mn(t)||ys(t)}function J(t){const e=t&&t.__v_raw;return e?J(e):t}function su(t){return Tr(t,"__v_skip",!0),t}const sa=t=>ue(t)?ta(t):t,ra=t=>ue(t)?tu(t):t;function Hd(t){Ft&&rt&&(t=J(t),Gc(t.dep||(t.dep=Yo())))}function qd(t,e){t=J(t),t.dep&&io(t.dep)}function Ue(t){return!!(t&&t.__v_isRef===!0)}function Kd(t){return Ue(t)?t.value:t}const zd={get:(t,e,n)=>Kd(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Ue(r)&&!Ue(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function ru(t){return Mn(t)?t:new Proxy(t,zd)}var iu;class Wd{constructor(e,n,s,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[iu]=!1,this._dirty=!0,this.effect=new Xo(e,()=>{this._dirty||(this._dirty=!0,qd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=J(this);return Hd(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}iu="__v_isReadonly";function Gd(t,e,n=!1){let s,r;const i=H(t);return i?(s=t,r=ot):(s=t.get,r=t.set),new Wd(s,r,i||!r,n)}function Vt(t,e,n,s){let r;try{r=s?t(...s):t()}catch(i){Qr(i,e,n)}return r}function Ze(t,e,n,s){if(H(t)){const i=Vt(t,e,n,s);return i&&jc(i)&&i.catch(o=>{Qr(o,e,n)}),i}const r=[];for(let i=0;i<t.length;i++)r.push(Ze(t[i],e,n,s));return r}function Qr(t,e,n,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){Vt(l,null,10,[t,o,a]);return}}Qd(t,n,r,s)}function Qd(t,e,n,s=!0){console.error(t)}let vs=!1,ao=!1;const xe=[];let gt=0;const Rn=[];let Ct=null,sn=0;const ou=Promise.resolve();let ia=null;function Yd(t){const e=ia||ou;return t?e.then(this?t.bind(this):t):e}function Xd(t){let e=gt+1,n=xe.length;for(;e<n;){const s=e+n>>>1;ws(xe[s])<t?e=s+1:n=s}return e}function oa(t){(!xe.length||!xe.includes(t,vs&&t.allowRecurse?gt+1:gt))&&(t.id==null?xe.push(t):xe.splice(Xd(t.id),0,t),au())}function au(){!vs&&!ao&&(ao=!0,ia=ou.then(cu))}function Jd(t){const e=xe.indexOf(t);e>gt&&xe.splice(e,1)}function Zd(t){B(t)?Rn.push(...t):(!Ct||!Ct.includes(t,t.allowRecurse?sn+1:sn))&&Rn.push(t),au()}function vl(t,e=vs?gt+1:0){for(;e<xe.length;e++){const n=xe[e];n&&n.pre&&(xe.splice(e,1),e--,n())}}function lu(t){if(Rn.length){const e=[...new Set(Rn)];if(Rn.length=0,Ct){Ct.push(...e);return}for(Ct=e,Ct.sort((n,s)=>ws(n)-ws(s)),sn=0;sn<Ct.length;sn++)Ct[sn]();Ct=null,sn=0}}const ws=t=>t.id==null?1/0:t.id,ep=(t,e)=>{const n=ws(t)-ws(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function cu(t){ao=!1,vs=!0,xe.sort(ep);const e=ot;try{for(gt=0;gt<xe.length;gt++){const n=xe[gt];n&&n.active!==!1&&Vt(n,null,14)}}finally{gt=0,xe.length=0,lu(),vs=!1,ia=null,(xe.length||Rn.length)&&cu()}}function tp(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||ee;let r=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:p}=s[u]||ee;p&&(r=n.map(y=>y.trim())),f&&(r=n.map(to))}let a,l=s[a=Ri(e)]||s[a=Ri(bt(e))];!l&&i&&(l=s[a=Ri(Wn(e))]),l&&Ze(l,t,6,r);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ze(c,t,6,r)}}function uu(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!H(t)){const l=c=>{const u=uu(c,e,!0);u&&(a=!0,Le(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ue(t)&&s.set(t,null),null):(B(i)?i.forEach(l=>o[l]=null):Le(o,i),ue(t)&&s.set(t,o),o)}function Yr(t,e){return!t||!Kr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Q(t,e[0].toLowerCase()+e.slice(1))||Q(t,Wn(e))||Q(t,e))}let Xe=null,hu=null;function _r(t){const e=Xe;return Xe=t,hu=t&&t.type.__scopeId||null,e}function np(t,e=Xe,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Nl(-1);const i=_r(e),o=t(...r);return _r(i),s._d&&Nl(1),o};return s._n=!0,s._c=!0,s._d=!0,s}function Oi(t){const{type:e,vnode:n,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:p,setupState:y,ctx:_,inheritAttrs:S}=t;let x,P;const ie=_r(t);try{if(n.shapeFlag&4){const te=r||s;x=pt(u.call(te,te,f,i,y,p,_)),P=l}else{const te=e;x=pt(te.length>1?te(i,{attrs:l,slots:a,emit:c}):te(i,null)),P=e.props?l:sp(l)}}catch(te){us.length=0,Qr(te,t,1),x=wt(at)}let oe=x;if(P&&S!==!1){const te=Object.keys(P),{shapeFlag:Ce}=oe;te.length&&Ce&7&&(o&&te.some(Wo)&&(P=rp(P,o)),oe=Ht(oe,P))}return n.dirs&&(oe=Ht(oe),oe.dirs=oe.dirs?oe.dirs.concat(n.dirs):n.dirs),n.transition&&(oe.transition=n.transition),x=oe,_r(ie),x}const sp=t=>{let e;for(const n in t)(n==="class"||n==="style"||Kr(n))&&((e||(e={}))[n]=t[n]);return e},rp=(t,e)=>{const n={};for(const s in t)(!Wo(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function ip(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?wl(s,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==s[p]&&!Yr(c,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?wl(s,o,c):!0:!!o;return!1}function wl(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Yr(n,i))return!0}return!1}function op({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const ap=t=>t.__isSuspense;function lp(t,e){e&&e.pendingBranch?B(t)?e.effects.push(...t):e.effects.push(t):Zd(t)}function cp(t,e){if(Ie){let n=Ie.provides;const s=Ie.parent&&Ie.parent.provides;s===n&&(n=Ie.provides=Object.create(s)),n[t]=e}}function Li(t,e,n=!1){const s=Ie||Xe;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&H(e)?e.call(s.proxy):e}}const El={};function Pi(t,e,n){return fu(t,e,n)}function fu(t,e,{immediate:n,deep:s,flush:r,onTrack:i,onTrigger:o}=ee){const a=Ie;let l,c=!1,u=!1;if(Ue(t)?(l=()=>t.value,c=oo(t)):Mn(t)?(l=()=>t,s=!0):B(t)?(u=!0,c=t.some(P=>Mn(P)||oo(P)),l=()=>t.map(P=>{if(Ue(P))return P.value;if(Mn(P))return ln(P);if(H(P))return Vt(P,a,2)})):H(t)?e?l=()=>Vt(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),Ze(t,a,3,[p])}:l=ot,e&&s){const P=l;l=()=>ln(P())}let f,p=P=>{f=x.onStop=()=>{Vt(P,a,4)}};if(Is)return p=ot,e?n&&Ze(e,a,3,[l(),u?[]:void 0,p]):l(),ot;let y=u?[]:El;const _=()=>{if(!!x.active)if(e){const P=x.run();(s||c||(u?P.some((ie,oe)=>Ir(ie,y[oe])):Ir(P,y)))&&(f&&f(),Ze(e,a,3,[P,y===El?void 0:y,p]),y=P)}else x.run()};_.allowRecurse=!!e;let S;r==="sync"?S=_:r==="post"?S=()=>$e(_,a&&a.suspense):(_.pre=!0,a&&(_.id=a.uid),S=()=>oa(_));const x=new Xo(l,S);return e?n?_():y=x.run():r==="post"?$e(x.run.bind(x),a&&a.suspense):x.run(),()=>{x.stop(),a&&a.scope&&Go(a.scope.effects,x)}}function up(t,e,n){const s=this.proxy,r=Te(t)?t.includes(".")?du(s,t):()=>s[t]:t.bind(s,s);let i;H(e)?i=e:(i=e.handler,n=e);const o=Ie;Fn(this);const a=fu(r,i.bind(s),n);return o?Fn(o):dn(),a}function du(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function ln(t,e){if(!ue(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ue(t))ln(t.value,e);else if(B(t))for(let n=0;n<t.length;n++)ln(t[n],e);else if($c(t)||xn(t))t.forEach(n=>{ln(n,e)});else if(qc(t))for(const n in t)ln(t[n],e);return t}function hp(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return yu(()=>{t.isMounted=!0}),vu(()=>{t.isUnmounting=!0}),t}const Ye=[Function,Array],fp={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ye,onEnter:Ye,onAfterEnter:Ye,onEnterCancelled:Ye,onBeforeLeave:Ye,onLeave:Ye,onAfterLeave:Ye,onLeaveCancelled:Ye,onBeforeAppear:Ye,onAppear:Ye,onAfterAppear:Ye,onAppearCancelled:Ye},setup(t,{slots:e}){const n=Xp(),s=hp();let r;return()=>{const i=e.default&&gu(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const S of i)if(S.type!==at){o=S;break}}const a=J(t),{mode:l}=a;if(s.isLeaving)return Fi(o);const c=bl(o);if(!c)return Fi(o);const u=lo(c,a,s,n);co(c,u);const f=n.subTree,p=f&&bl(f);let y=!1;const{getTransitionKey:_}=c.type;if(_){const S=_();r===void 0?r=S:S!==r&&(r=S,y=!0)}if(p&&p.type!==at&&(!rn(c,p)||y)){const S=lo(p,a,s,n);if(co(p,S),l==="out-in")return s.isLeaving=!0,S.afterLeave=()=>{s.isLeaving=!1,n.update()},Fi(o);l==="in-out"&&c.type!==at&&(S.delayLeave=(x,P,ie)=>{const oe=pu(s,p);oe[String(p.key)]=p,x._leaveCb=()=>{P(),x._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=ie})}return o}}},dp=fp;function pu(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function lo(t,e,n,s){const{appear:r,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:p,onAfterLeave:y,onLeaveCancelled:_,onBeforeAppear:S,onAppear:x,onAfterAppear:P,onAppearCancelled:ie}=e,oe=String(t.key),te=pu(n,t),Ce=(K,Ee)=>{K&&Ze(K,s,9,Ee)},Ot=(K,Ee)=>{const he=Ee[1];Ce(K,Ee),B(K)?K.every(Ke=>Ke.length<=1)&&he():K.length<=1&&he()},tt={mode:i,persisted:o,beforeEnter(K){let Ee=a;if(!n.isMounted)if(r)Ee=S||a;else return;K._leaveCb&&K._leaveCb(!0);const he=te[oe];he&&rn(t,he)&&he.el._leaveCb&&he.el._leaveCb(),Ce(Ee,[K])},enter(K){let Ee=l,he=c,Ke=u;if(!n.isMounted)if(r)Ee=x||l,he=P||c,Ke=ie||u;else return;let lt=!1;const Tt=K._enterCb=ns=>{lt||(lt=!0,ns?Ce(Ke,[K]):Ce(he,[K]),tt.delayedLeave&&tt.delayedLeave(),K._enterCb=void 0)};Ee?Ot(Ee,[K,Tt]):Tt()},leave(K,Ee){const he=String(t.key);if(K._enterCb&&K._enterCb(!0),n.isUnmounting)return Ee();Ce(f,[K]);let Ke=!1;const lt=K._leaveCb=Tt=>{Ke||(Ke=!0,Ee(),Tt?Ce(_,[K]):Ce(y,[K]),K._leaveCb=void 0,te[he]===t&&delete te[he])};te[he]=t,p?Ot(p,[K,lt]):lt()},clone(K){return lo(K,e,n,s)}};return tt}function Fi(t){if(Xr(t))return t=Ht(t),t.children=null,t}function bl(t){return Xr(t)?t.children?t.children[0]:void 0:t}function co(t,e){t.shapeFlag&6&&t.component?co(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function gu(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===st?(o.patchFlag&128&&r++,s=s.concat(gu(o.children,e,a))):(e||o.type!==at)&&s.push(a!=null?Ht(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}const gr=t=>!!t.type.__asyncLoader,Xr=t=>t.type.__isKeepAlive;function pp(t,e){mu(t,"a",e)}function gp(t,e){mu(t,"da",e)}function mu(t,e,n=Ie){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Jr(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Xr(r.parent.vnode)&&mp(s,e,n,r),r=r.parent}}function mp(t,e,n,s){const r=Jr(e,t,s,!0);wu(()=>{Go(s[e],r)},n)}function Jr(t,e,n=Ie,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Gn(),Fn(n);const a=Ze(e,n,t,o);return dn(),Qn(),a});return s?r.unshift(i):r.push(i),i}}const Rt=t=>(e,n=Ie)=>(!Is||t==="sp")&&Jr(t,(...s)=>e(...s),n),yp=Rt("bm"),yu=Rt("m"),vp=Rt("bu"),wp=Rt("u"),vu=Rt("bum"),wu=Rt("um"),Ep=Rt("sp"),bp=Rt("rtg"),Ip=Rt("rtc");function Tp(t,e=Ie){Jr("ec",t,e)}function Ve(t,e){const n=Xe;if(n===null)return t;const s=ei(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,l,c=ee]=e[i];H(o)&&(o={mounted:o,updated:o}),o.deep&&ln(a),r.push({dir:o,instance:s,value:a,oldValue:void 0,arg:l,modifiers:c})}return t}function Zt(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Gn(),Ze(l,n,8,[t.el,a,t,e]),Qn())}}const aa="components";function _p(t,e){return bu(aa,t,!0,e)||t}const Eu=Symbol();function Cp(t){return Te(t)?bu(aa,t,!1)||t:t||Eu}function bu(t,e,n=!0,s=!1){const r=Xe||Ie;if(r){const i=r.type;if(t===aa){const a=ng(i,!1);if(a&&(a===e||a===bt(e)||a===Wr(bt(e))))return i}const o=Il(r[t]||i[t],e)||Il(r.appContext[t],e);return!o&&s?i:o}}function Il(t,e){return t&&(t[e]||t[bt(e)]||t[Wr(bt(e))])}const uo=t=>t?Ru(t)?ei(t)||t.proxy:uo(t.parent):null,Cr=Le(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>uo(t.parent),$root:t=>uo(t.root),$emit:t=>t.emit,$options:t=>la(t),$forceUpdate:t=>t.f||(t.f=()=>oa(t.update)),$nextTick:t=>t.n||(t.n=Yd.bind(t.proxy)),$watch:t=>up.bind(t)}),Ap={get({_:t},e){const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(s!==ee&&Q(s,e))return o[e]=1,s[e];if(r!==ee&&Q(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&Q(c,e))return o[e]=3,i[e];if(n!==ee&&Q(n,e))return o[e]=4,n[e];ho&&(o[e]=0)}}const u=Cr[e];let f,p;if(u)return e==="$attrs"&&Ge(t,"get",e),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==ee&&Q(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,Q(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return r!==ee&&Q(r,e)?(r[e]=n,!0):s!==ee&&Q(s,e)?(s[e]=n,!0):Q(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==ee&&Q(t,o)||e!==ee&&Q(e,o)||(a=i[0])&&Q(a,o)||Q(s,o)||Q(Cr,o)||Q(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Q(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let ho=!0;function Sp(t){const e=la(t),n=t.proxy,s=t.ctx;ho=!1,e.beforeCreate&&Tl(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:p,beforeUpdate:y,updated:_,activated:S,deactivated:x,beforeDestroy:P,beforeUnmount:ie,destroyed:oe,unmounted:te,render:Ce,renderTracked:Ot,renderTriggered:tt,errorCaptured:K,serverPrefetch:Ee,expose:he,inheritAttrs:Ke,components:lt,directives:Tt,filters:ns}=e;if(c&&Dp(c,s,null,t.appContext.config.unwrapInjectedRef),o)for(const fe in o){const ne=o[fe];H(ne)&&(s[fe]=ne.bind(n))}if(r){const fe=r.call(n,n);ue(fe)&&(t.data=ta(fe))}if(ho=!0,i)for(const fe in i){const ne=i[fe],Xt=H(ne)?ne.bind(n,n):H(ne.get)?ne.get.bind(n,n):ot,Zs=!H(ne)&&H(ne.set)?ne.set.bind(n):ot,Jt=rg({get:Xt,set:Zs});Object.defineProperty(s,fe,{enumerable:!0,configurable:!0,get:()=>Jt.value,set:ct=>Jt.value=ct})}if(a)for(const fe in a)Iu(a[fe],s,n,fe);if(l){const fe=H(l)?l.call(n):l;Reflect.ownKeys(fe).forEach(ne=>{cp(ne,fe[ne])})}u&&Tl(u,t,"c");function Pe(fe,ne){B(ne)?ne.forEach(Xt=>fe(Xt.bind(n))):ne&&fe(ne.bind(n))}if(Pe(yp,f),Pe(yu,p),Pe(vp,y),Pe(wp,_),Pe(pp,S),Pe(gp,x),Pe(Tp,K),Pe(Ip,Ot),Pe(bp,tt),Pe(vu,ie),Pe(wu,te),Pe(Ep,Ee),B(he))if(he.length){const fe=t.exposed||(t.exposed={});he.forEach(ne=>{Object.defineProperty(fe,ne,{get:()=>n[ne],set:Xt=>n[ne]=Xt})})}else t.exposed||(t.exposed={});Ce&&t.render===ot&&(t.render=Ce),Ke!=null&&(t.inheritAttrs=Ke),lt&&(t.components=lt),Tt&&(t.directives=Tt)}function Dp(t,e,n=ot,s=!1){B(t)&&(t=fo(t));for(const r in t){const i=t[r];let o;ue(i)?"default"in i?o=Li(i.from||r,i.default,!0):o=Li(i.from||r):o=Li(i),Ue(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function Tl(t,e,n){Ze(B(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Iu(t,e,n,s){const r=s.includes(".")?du(n,s):()=>n[s];if(Te(t)){const i=e[t];H(i)&&Pi(r,i)}else if(H(t))Pi(r,t.bind(n));else if(ue(t))if(B(t))t.forEach(i=>Iu(i,e,n,s));else{const i=H(t.handler)?t.handler.bind(n):e[t.handler];H(i)&&Pi(r,i,t)}}function la(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(c=>Ar(l,c,o,!0)),Ar(l,e,o)),ue(e)&&i.set(e,l),l}function Ar(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Ar(t,i,n,!0),r&&r.forEach(o=>Ar(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=Np[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Np={data:_l,props:tn,emits:tn,methods:tn,computed:tn,beforeCreate:Fe,created:Fe,beforeMount:Fe,mounted:Fe,beforeUpdate:Fe,updated:Fe,beforeDestroy:Fe,beforeUnmount:Fe,destroyed:Fe,unmounted:Fe,activated:Fe,deactivated:Fe,errorCaptured:Fe,serverPrefetch:Fe,components:tn,directives:tn,watch:xp,provide:_l,inject:kp};function _l(t,e){return e?t?function(){return Le(H(t)?t.call(this,this):t,H(e)?e.call(this,this):e)}:e:t}function kp(t,e){return tn(fo(t),fo(e))}function fo(t){if(B(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Fe(t,e){return t?[...new Set([].concat(t,e))]:e}function tn(t,e){return t?Le(Le(Object.create(null),t),e):e}function xp(t,e){if(!t)return e;if(!e)return t;const n=Le(Object.create(null),t);for(const s in e)n[s]=Fe(t[s],e[s]);return n}function Mp(t,e,n,s=!1){const r={},i={};Tr(i,Zr,1),t.propsDefaults=Object.create(null),Tu(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:jd(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Rp(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=J(r),[l]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(Yr(t.emitsOptions,p))continue;const y=e[p];if(l)if(Q(i,p))y!==i[p]&&(i[p]=y,c=!0);else{const _=bt(p);r[_]=po(l,a,_,y,t,!1)}else y!==i[p]&&(i[p]=y,c=!0)}}}else{Tu(t,e,r,i)&&(c=!0);let u;for(const f in a)(!e||!Q(e,f)&&((u=Wn(f))===f||!Q(e,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=po(l,a,f,void 0,t,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!Q(e,f)&&!0)&&(delete i[f],c=!0)}c&&Dt(t,"set","$attrs")}function Tu(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(dr(l))continue;const c=e[l];let u;r&&Q(r,u=bt(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:Yr(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(i){const l=J(n),c=a||ee;for(let u=0;u<i.length;u++){const f=i[u];n[f]=po(r,l,f,c[f],t,!Q(c,f))}}return o}function po(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=Q(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&H(l)){const{propsDefaults:c}=r;n in c?s=c[n]:(Fn(r),s=c[n]=l.call(null,e),dn())}else s=l}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Wn(n))&&(s=!0))}return s}function _u(t,e,n=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!H(t)){const u=f=>{l=!0;const[p,y]=_u(f,e,!0);Le(o,p),y&&a.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ue(t)&&s.set(t,kn),kn;if(B(i))for(let u=0;u<i.length;u++){const f=bt(i[u]);Cl(f)&&(o[f]=ee)}else if(i)for(const u in i){const f=bt(u);if(Cl(f)){const p=i[u],y=o[f]=B(p)||H(p)?{type:p}:p;if(y){const _=Dl(Boolean,y.type),S=Dl(String,y.type);y[0]=_>-1,y[1]=S<0||_<S,(_>-1||Q(y,"default"))&&a.push(f)}}}const c=[o,a];return ue(t)&&s.set(t,c),c}function Cl(t){return t[0]!=="$"}function Al(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Sl(t,e){return Al(t)===Al(e)}function Dl(t,e){return B(e)?e.findIndex(n=>Sl(n,t)):H(e)&&Sl(e,t)?0:-1}const Cu=t=>t[0]==="_"||t==="$stable",ca=t=>B(t)?t.map(pt):[pt(t)],Op=(t,e,n)=>{if(e._n)return e;const s=np((...r)=>ca(e(...r)),n);return s._c=!1,s},Au=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Cu(r))continue;const i=t[r];if(H(i))e[r]=Op(r,i,s);else if(i!=null){const o=ca(i);e[r]=()=>o}}},Su=(t,e)=>{const n=ca(e);t.slots.default=()=>n},Lp=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=J(e),Tr(e,"_",n)):Au(e,t.slots={})}else t.slots={},e&&Su(t,e);Tr(t.slots,Zr,1)},Pp=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=ee;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(Le(r,e),!n&&a===1&&delete r._):(i=!e.$stable,Au(e,r)),o=e}else e&&(Su(t,e),o={default:1});if(i)for(const a in r)!Cu(a)&&!(a in o)&&delete r[a]};function Du(){return{app:null,config:{isNativeTag:ld,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Fp=0;function Vp(t,e){return function(s,r=null){H(s)||(s=Object.assign({},s)),r!=null&&!ue(r)&&(r=null);const i=Du(),o=new Set;let a=!1;const l=i.app={_uid:Fp++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:ig,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&H(c.install)?(o.add(c),c.install(l,...u)):H(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,f){if(!a){const p=wt(s,r);return p.appContext=i,u&&e?e(p,c):t(p,c,f),a=!0,l._container=c,c.__vue_app__=l,ei(p.component)||p.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l}};return l}}function go(t,e,n,s,r=!1){if(B(t)){t.forEach((p,y)=>go(p,e&&(B(e)?e[y]:e),n,s,r));return}if(gr(s)&&!r)return;const i=s.shapeFlag&4?ei(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===ee?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(Te(c)?(u[c]=null,Q(f,c)&&(f[c]=null)):Ue(c)&&(c.value=null)),H(l))Vt(l,a,12,[o,u]);else{const p=Te(l),y=Ue(l);if(p||y){const _=()=>{if(t.f){const S=p?u[l]:l.value;r?B(S)&&Go(S,i):B(S)?S.includes(i)||S.push(i):p?(u[l]=[i],Q(f,l)&&(f[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else p?(u[l]=o,Q(f,l)&&(f[l]=o)):y&&(l.value=o,t.k&&(u[t.k]=o))};o?(_.id=-1,$e(_,n)):_()}}}const $e=lp;function Up(t){return Bp(t)}function Bp(t,e){const n=pd();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:p,setScopeId:y=ot,insertStaticContent:_}=t,S=(h,d,m,w=null,v=null,C=null,D=!1,T=null,A=!!d.dynamicChildren)=>{if(h===d)return;h&&!rn(h,d)&&(w=er(h),ct(h,v,C,!0),h=null),d.patchFlag===-2&&(A=!1,d.dynamicChildren=null);const{type:E,ref:R,shapeFlag:N}=d;switch(E){case ua:x(h,d,m,w);break;case at:P(h,d,m,w);break;case Vi:h==null&&ie(d,m,w,D);break;case st:lt(h,d,m,w,v,C,D,T,A);break;default:N&1?Ce(h,d,m,w,v,C,D,T,A):N&6?Tt(h,d,m,w,v,C,D,T,A):(N&64||N&128)&&E.process(h,d,m,w,v,C,D,T,A,_n)}R!=null&&v&&go(R,h&&h.ref,C,d||h,!d)},x=(h,d,m,w)=>{if(h==null)s(d.el=a(d.children),m,w);else{const v=d.el=h.el;d.children!==h.children&&c(v,d.children)}},P=(h,d,m,w)=>{h==null?s(d.el=l(d.children||""),m,w):d.el=h.el},ie=(h,d,m,w)=>{[h.el,h.anchor]=_(h.children,d,m,w,h.el,h.anchor)},oe=({el:h,anchor:d},m,w)=>{let v;for(;h&&h!==d;)v=p(h),s(h,m,w),h=v;s(d,m,w)},te=({el:h,anchor:d})=>{let m;for(;h&&h!==d;)m=p(h),r(h),h=m;r(d)},Ce=(h,d,m,w,v,C,D,T,A)=>{D=D||d.type==="svg",h==null?Ot(d,m,w,v,C,D,T,A):Ee(h,d,v,C,D,T,A)},Ot=(h,d,m,w,v,C,D,T)=>{let A,E;const{type:R,props:N,shapeFlag:O,transition:U,dirs:z}=h;if(A=h.el=o(h.type,C,N&&N.is,N),O&8?u(A,h.children):O&16&&K(h.children,A,null,w,v,C&&R!=="foreignObject",D,T),z&&Zt(h,null,w,"created"),N){for(const Z in N)Z!=="value"&&!dr(Z)&&i(A,Z,null,N[Z],C,h.children,w,v,_t);"value"in N&&i(A,"value",null,N.value),(E=N.onVnodeBeforeMount)&&ht(E,w,h)}tt(A,h,h.scopeId,D,w),z&&Zt(h,null,w,"beforeMount");const se=(!v||v&&!v.pendingBranch)&&U&&!U.persisted;se&&U.beforeEnter(A),s(A,d,m),((E=N&&N.onVnodeMounted)||se||z)&&$e(()=>{E&&ht(E,w,h),se&&U.enter(A),z&&Zt(h,null,w,"mounted")},v)},tt=(h,d,m,w,v)=>{if(m&&y(h,m),w)for(let C=0;C<w.length;C++)y(h,w[C]);if(v){let C=v.subTree;if(d===C){const D=v.vnode;tt(h,D,D.scopeId,D.slotScopeIds,v.parent)}}},K=(h,d,m,w,v,C,D,T,A=0)=>{for(let E=A;E<h.length;E++){const R=h[E]=T?Pt(h[E]):pt(h[E]);S(null,R,d,m,w,v,C,D,T)}},Ee=(h,d,m,w,v,C,D)=>{const T=d.el=h.el;let{patchFlag:A,dynamicChildren:E,dirs:R}=d;A|=h.patchFlag&16;const N=h.props||ee,O=d.props||ee;let U;m&&en(m,!1),(U=O.onVnodeBeforeUpdate)&&ht(U,m,d,h),R&&Zt(d,h,m,"beforeUpdate"),m&&en(m,!0);const z=v&&d.type!=="foreignObject";if(E?he(h.dynamicChildren,E,T,m,w,z,C):D||ne(h,d,T,null,m,w,z,C,!1),A>0){if(A&16)Ke(T,d,N,O,m,w,v);else if(A&2&&N.class!==O.class&&i(T,"class",null,O.class,v),A&4&&i(T,"style",N.style,O.style,v),A&8){const se=d.dynamicProps;for(let Z=0;Z<se.length;Z++){const de=se[Z],nt=N[de],Cn=O[de];(Cn!==nt||de==="value")&&i(T,de,nt,Cn,v,h.children,m,w,_t)}}A&1&&h.children!==d.children&&u(T,d.children)}else!D&&E==null&&Ke(T,d,N,O,m,w,v);((U=O.onVnodeUpdated)||R)&&$e(()=>{U&&ht(U,m,d,h),R&&Zt(d,h,m,"updated")},w)},he=(h,d,m,w,v,C,D)=>{for(let T=0;T<d.length;T++){const A=h[T],E=d[T],R=A.el&&(A.type===st||!rn(A,E)||A.shapeFlag&70)?f(A.el):m;S(A,E,R,null,w,v,C,D,!0)}},Ke=(h,d,m,w,v,C,D)=>{if(m!==w){if(m!==ee)for(const T in m)!dr(T)&&!(T in w)&&i(h,T,m[T],null,D,d.children,v,C,_t);for(const T in w){if(dr(T))continue;const A=w[T],E=m[T];A!==E&&T!=="value"&&i(h,T,E,A,D,d.children,v,C,_t)}"value"in w&&i(h,"value",m.value,w.value)}},lt=(h,d,m,w,v,C,D,T,A)=>{const E=d.el=h?h.el:a(""),R=d.anchor=h?h.anchor:a("");let{patchFlag:N,dynamicChildren:O,slotScopeIds:U}=d;U&&(T=T?T.concat(U):U),h==null?(s(E,m,w),s(R,m,w),K(d.children,m,R,v,C,D,T,A)):N>0&&N&64&&O&&h.dynamicChildren?(he(h.dynamicChildren,O,m,v,C,D,T),(d.key!=null||v&&d===v.subTree)&&Nu(h,d,!0)):ne(h,d,m,R,v,C,D,T,A)},Tt=(h,d,m,w,v,C,D,T,A)=>{d.slotScopeIds=T,h==null?d.shapeFlag&512?v.ctx.activate(d,m,w,D,A):ns(d,m,w,v,C,D,A):sl(h,d,A)},ns=(h,d,m,w,v,C,D)=>{const T=h.component=Yp(h,w,v);if(Xr(h)&&(T.ctx.renderer=_n),Jp(T),T.asyncDep){if(v&&v.registerDep(T,Pe),!h.el){const A=T.subTree=wt(at);P(null,A,d,m)}return}Pe(T,h,d,m,v,C,D)},sl=(h,d,m)=>{const w=d.component=h.component;if(ip(h,d,m))if(w.asyncDep&&!w.asyncResolved){fe(w,d,m);return}else w.next=d,Jd(w.update),w.update();else d.el=h.el,w.vnode=d},Pe=(h,d,m,w,v,C,D)=>{const T=()=>{if(h.isMounted){let{next:R,bu:N,u:O,parent:U,vnode:z}=h,se=R,Z;en(h,!1),R?(R.el=z.el,fe(h,R,D)):R=z,N&&pr(N),(Z=R.props&&R.props.onVnodeBeforeUpdate)&&ht(Z,U,R,z),en(h,!0);const de=Oi(h),nt=h.subTree;h.subTree=de,S(nt,de,f(nt.el),er(nt),h,v,C),R.el=de.el,se===null&&op(h,de.el),O&&$e(O,v),(Z=R.props&&R.props.onVnodeUpdated)&&$e(()=>ht(Z,U,R,z),v)}else{let R;const{el:N,props:O}=d,{bm:U,m:z,parent:se}=h,Z=gr(d);if(en(h,!1),U&&pr(U),!Z&&(R=O&&O.onVnodeBeforeMount)&&ht(R,se,d),en(h,!0),N&&Mi){const de=()=>{h.subTree=Oi(h),Mi(N,h.subTree,h,v,null)};Z?d.type.__asyncLoader().then(()=>!h.isUnmounted&&de()):de()}else{const de=h.subTree=Oi(h);S(null,de,m,w,h,v,C),d.el=de.el}if(z&&$e(z,v),!Z&&(R=O&&O.onVnodeMounted)){const de=d;$e(()=>ht(R,se,de),v)}(d.shapeFlag&256||se&&gr(se.vnode)&&se.vnode.shapeFlag&256)&&h.a&&$e(h.a,v),h.isMounted=!0,d=m=w=null}},A=h.effect=new Xo(T,()=>oa(E),h.scope),E=h.update=()=>A.run();E.id=h.uid,en(h,!0),E()},fe=(h,d,m)=>{d.component=h;const w=h.vnode.props;h.vnode=d,h.next=null,Rp(h,d.props,w,m),Pp(h,d.children,m),Gn(),vl(),Qn()},ne=(h,d,m,w,v,C,D,T,A=!1)=>{const E=h&&h.children,R=h?h.shapeFlag:0,N=d.children,{patchFlag:O,shapeFlag:U}=d;if(O>0){if(O&128){Zs(E,N,m,w,v,C,D,T,A);return}else if(O&256){Xt(E,N,m,w,v,C,D,T,A);return}}U&8?(R&16&&_t(E,v,C),N!==E&&u(m,N)):R&16?U&16?Zs(E,N,m,w,v,C,D,T,A):_t(E,v,C,!0):(R&8&&u(m,""),U&16&&K(N,m,w,v,C,D,T,A))},Xt=(h,d,m,w,v,C,D,T,A)=>{h=h||kn,d=d||kn;const E=h.length,R=d.length,N=Math.min(E,R);let O;for(O=0;O<N;O++){const U=d[O]=A?Pt(d[O]):pt(d[O]);S(h[O],U,m,null,v,C,D,T,A)}E>R?_t(h,v,C,!0,!1,N):K(d,m,w,v,C,D,T,A,N)},Zs=(h,d,m,w,v,C,D,T,A)=>{let E=0;const R=d.length;let N=h.length-1,O=R-1;for(;E<=N&&E<=O;){const U=h[E],z=d[E]=A?Pt(d[E]):pt(d[E]);if(rn(U,z))S(U,z,m,null,v,C,D,T,A);else break;E++}for(;E<=N&&E<=O;){const U=h[N],z=d[O]=A?Pt(d[O]):pt(d[O]);if(rn(U,z))S(U,z,m,null,v,C,D,T,A);else break;N--,O--}if(E>N){if(E<=O){const U=O+1,z=U<R?d[U].el:w;for(;E<=O;)S(null,d[E]=A?Pt(d[E]):pt(d[E]),m,z,v,C,D,T,A),E++}}else if(E>O)for(;E<=N;)ct(h[E],v,C,!0),E++;else{const U=E,z=E,se=new Map;for(E=z;E<=O;E++){const ze=d[E]=A?Pt(d[E]):pt(d[E]);ze.key!=null&&se.set(ze.key,E)}let Z,de=0;const nt=O-z+1;let Cn=!1,ol=0;const ss=new Array(nt);for(E=0;E<nt;E++)ss[E]=0;for(E=U;E<=N;E++){const ze=h[E];if(de>=nt){ct(ze,v,C,!0);continue}let ut;if(ze.key!=null)ut=se.get(ze.key);else for(Z=z;Z<=O;Z++)if(ss[Z-z]===0&&rn(ze,d[Z])){ut=Z;break}ut===void 0?ct(ze,v,C,!0):(ss[ut-z]=E+1,ut>=ol?ol=ut:Cn=!0,S(ze,d[ut],m,null,v,C,D,T,A),de++)}const al=Cn?$p(ss):kn;for(Z=al.length-1,E=nt-1;E>=0;E--){const ze=z+E,ut=d[ze],ll=ze+1<R?d[ze+1].el:w;ss[E]===0?S(null,ut,m,ll,v,C,D,T,A):Cn&&(Z<0||E!==al[Z]?Jt(ut,m,ll,2):Z--)}}},Jt=(h,d,m,w,v=null)=>{const{el:C,type:D,transition:T,children:A,shapeFlag:E}=h;if(E&6){Jt(h.component.subTree,d,m,w);return}if(E&128){h.suspense.move(d,m,w);return}if(E&64){D.move(h,d,m,_n);return}if(D===st){s(C,d,m);for(let N=0;N<A.length;N++)Jt(A[N],d,m,w);s(h.anchor,d,m);return}if(D===Vi){oe(h,d,m);return}if(w!==2&&E&1&&T)if(w===0)T.beforeEnter(C),s(C,d,m),$e(()=>T.enter(C),v);else{const{leave:N,delayLeave:O,afterLeave:U}=T,z=()=>s(C,d,m),se=()=>{N(C,()=>{z(),U&&U()})};O?O(C,z,se):se()}else s(C,d,m)},ct=(h,d,m,w=!1,v=!1)=>{const{type:C,props:D,ref:T,children:A,dynamicChildren:E,shapeFlag:R,patchFlag:N,dirs:O}=h;if(T!=null&&go(T,null,m,h,!0),R&256){d.ctx.deactivate(h);return}const U=R&1&&O,z=!gr(h);let se;if(z&&(se=D&&D.onVnodeBeforeUnmount)&&ht(se,d,h),R&6)td(h.component,m,w);else{if(R&128){h.suspense.unmount(m,w);return}U&&Zt(h,null,d,"beforeUnmount"),R&64?h.type.remove(h,d,m,v,_n,w):E&&(C!==st||N>0&&N&64)?_t(E,d,m,!1,!0):(C===st&&N&384||!v&&R&16)&&_t(A,d,m),w&&rl(h)}(z&&(se=D&&D.onVnodeUnmounted)||U)&&$e(()=>{se&&ht(se,d,h),U&&Zt(h,null,d,"unmounted")},m)},rl=h=>{const{type:d,el:m,anchor:w,transition:v}=h;if(d===st){ed(m,w);return}if(d===Vi){te(h);return}const C=()=>{r(m),v&&!v.persisted&&v.afterLeave&&v.afterLeave()};if(h.shapeFlag&1&&v&&!v.persisted){const{leave:D,delayLeave:T}=v,A=()=>D(m,C);T?T(h.el,C,A):A()}else C()},ed=(h,d)=>{let m;for(;h!==d;)m=p(h),r(h),h=m;r(d)},td=(h,d,m)=>{const{bum:w,scope:v,update:C,subTree:D,um:T}=h;w&&pr(w),v.stop(),C&&(C.active=!1,ct(D,h,d,m)),T&&$e(T,d),$e(()=>{h.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},_t=(h,d,m,w=!1,v=!1,C=0)=>{for(let D=C;D<h.length;D++)ct(h[D],d,m,w,v)},er=h=>h.shapeFlag&6?er(h.component.subTree):h.shapeFlag&128?h.suspense.next():p(h.anchor||h.el),il=(h,d,m)=>{h==null?d._vnode&&ct(d._vnode,null,null,!0):S(d._vnode||null,h,d,null,null,null,m),vl(),lu(),d._vnode=h},_n={p:S,um:ct,m:Jt,r:rl,mt:ns,mc:K,pc:ne,pbc:he,n:er,o:t};let xi,Mi;return e&&([xi,Mi]=e(_n)),{render:il,hydrate:xi,createApp:Vp(il,xi)}}function en({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Nu(t,e,n=!1){const s=t.children,r=e.children;if(B(s)&&B(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Pt(r[i]),a.el=o.el),n||Nu(o,a))}}function $p(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const jp=t=>t.__isTeleport,st=Symbol(void 0),ua=Symbol(void 0),at=Symbol(void 0),Vi=Symbol(void 0),us=[];let it=null;function Je(t=!1){us.push(it=t?null:[])}function Hp(){us.pop(),it=us[us.length-1]||null}let Es=1;function Nl(t){Es+=t}function ku(t){return t.dynamicChildren=Es>0?it||kn:null,Hp(),Es>0&&it&&it.push(t),t}function yt(t,e,n,s,r,i){return ku(g(t,e,n,s,r,i,!0))}function xu(t,e,n,s,r){return ku(wt(t,e,n,s,r,!0))}function qp(t){return t?t.__v_isVNode===!0:!1}function rn(t,e){return t.type===e.type&&t.key===e.key}const Zr="__vInternal",Mu=({key:t})=>t!=null?t:null,mr=({ref:t,ref_key:e,ref_for:n})=>t!=null?Te(t)||Ue(t)||H(t)?{i:Xe,r:t,k:e,f:!!n}:t:null;function g(t,e=null,n=null,s=0,r=null,i=t===st?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Mu(e),ref:e&&mr(e),scopeId:hu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(ha(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Te(n)?8:16),Es>0&&!o&&it&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&it.push(l),l}const wt=Kp;function Kp(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Eu)&&(t=at),qp(t)){const a=Ht(t,e,!0);return n&&ha(a,n),Es>0&&!i&&it&&(a.shapeFlag&6?it[it.indexOf(t)]=a:it.push(a)),a.patchFlag|=-2,a}if(sg(t)&&(t=t.__vccOpts),e){e=zp(e);let{class:a,style:l}=e;a&&!Te(a)&&(e.class=Nn(a)),ue(l)&&(nu(l)&&!B(l)&&(l=Le({},l)),e.style=zo(l))}const o=Te(t)?1:ap(t)?128:jp(t)?64:ue(t)?4:H(t)?2:0;return g(t,e,n,s,r,o,i,!0)}function zp(t){return t?nu(t)||Zr in t?Le({},t):t:null}function Ht(t,e,n=!1){const{props:s,ref:r,patchFlag:i,children:o}=t,a=e?Wp(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Mu(a),ref:e&&e.ref?n&&r?B(r)?r.concat(mr(e)):[r,mr(e)]:mr(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==st?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ht(t.ssContent),ssFallback:t.ssFallback&&Ht(t.ssFallback),el:t.el,anchor:t.anchor}}function bs(t=" ",e=0){return wt(ua,null,t,e)}function Ui(t="",e=!1){return e?(Je(),xu(at,null,t)):wt(at,null,t)}function pt(t){return t==null||typeof t=="boolean"?wt(at):B(t)?wt(st,null,t.slice()):typeof t=="object"?Pt(t):wt(ua,null,String(t))}function Pt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ht(t)}function ha(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(B(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),ha(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(Zr in e)?e._ctx=Xe:r===3&&Xe&&(Xe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else H(e)?(e={default:e,_ctx:Xe},n=32):(e=String(e),s&64?(n=16,e=[bs(e)]):n=8);t.children=e,t.shapeFlag|=n}function Wp(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Nn([e.class,s.class]));else if(r==="style")e.style=zo([e.style,s.style]);else if(Kr(r)){const i=e[r],o=s[r];o&&i!==o&&!(B(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function ht(t,e,n,s=null){Ze(t,e,7,[n,s])}const Gp=Du();let Qp=0;function Yp(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Gp,i={uid:Qp++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new gd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_u(s,r),emitsOptions:uu(s,r),emit:null,emitted:null,propsDefaults:ee,inheritAttrs:s.inheritAttrs,ctx:ee,data:ee,props:ee,attrs:ee,slots:ee,refs:ee,setupState:ee,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=tp.bind(null,i),t.ce&&t.ce(i),i}let Ie=null;const Xp=()=>Ie||Xe,Fn=t=>{Ie=t,t.scope.on()},dn=()=>{Ie&&Ie.scope.off(),Ie=null};function Ru(t){return t.vnode.shapeFlag&4}let Is=!1;function Jp(t,e=!1){Is=e;const{props:n,children:s}=t.vnode,r=Ru(t);Mp(t,n,r,e),Lp(t,s);const i=r?Zp(t,e):void 0;return Is=!1,i}function Zp(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=su(new Proxy(t.ctx,Ap));const{setup:s}=n;if(s){const r=t.setupContext=s.length>1?tg(t):null;Fn(t),Gn();const i=Vt(s,t,0,[t.props,r]);if(Qn(),dn(),jc(i)){if(i.then(dn,dn),e)return i.then(o=>{kl(t,o,e)}).catch(o=>{Qr(o,t,0)});t.asyncDep=i}else kl(t,i,e)}else Ou(t,e)}function kl(t,e,n){H(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ue(e)&&(t.setupState=ru(e)),Ou(t,n)}let xl;function Ou(t,e,n){const s=t.type;if(!t.render){if(!e&&xl&&!s.render){const r=s.template||la(t).template;if(r){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=s,c=Le(Le({isCustomElement:i,delimiters:a},o),l);s.render=xl(r,c)}}t.render=s.render||ot}Fn(t),Gn(),Sp(t),Qn(),dn()}function eg(t){return new Proxy(t.attrs,{get(e,n){return Ge(t,"get","$attrs"),e[n]}})}function tg(t){const e=s=>{t.exposed=s||{}};let n;return{get attrs(){return n||(n=eg(t))},slots:t.slots,emit:t.emit,expose:e}}function ei(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ru(su(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Cr)return Cr[n](t)}}))}function ng(t,e=!0){return H(t)?t.displayName||t.name:t.name||e&&t.__name}function sg(t){return H(t)&&"__vccOpts"in t}const rg=(t,e)=>Gd(t,e,Is),ig="3.2.40",og="http://www.w3.org/2000/svg",on=typeof document<"u"?document:null,Ml=on&&on.createElement("template"),ag={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e?on.createElementNS(og,t):on.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>on.createTextNode(t),createComment:t=>on.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>on.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Ml.innerHTML=s?`<svg>${t}</svg>`:t;const a=Ml.content;if(s){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function lg(t,e,n){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function cg(t,e,n){const s=t.style,r=Te(n);if(n&&!r){for(const i in n)mo(s,i,n[i]);if(e&&!Te(e))for(const i in e)n[i]==null&&mo(s,i,"")}else{const i=s.display;r?e!==n&&(s.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=i)}}const Rl=/\s*!important$/;function mo(t,e,n){if(B(n))n.forEach(s=>mo(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=ug(t,e);Rl.test(n)?t.setProperty(Wn(s),n.replace(Rl,""),"important"):t[s]=n}}const Ol=["Webkit","Moz","ms"],Bi={};function ug(t,e){const n=Bi[e];if(n)return n;let s=bt(e);if(s!=="filter"&&s in t)return Bi[e]=s;s=Wr(s);for(let r=0;r<Ol.length;r++){const i=Ol[r]+s;if(i in t)return Bi[e]=i}return e}const Ll="http://www.w3.org/1999/xlink";function hg(t,e,n,s,r){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Ll,e.slice(6,e.length)):t.setAttributeNS(Ll,e,n);else{const i=sd(e);n==null||i&&!Uc(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function fg(t,e,n,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n==null?"":n;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Uc(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}const[Lu,dg]=(()=>{let t=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(n&&Number(n[1])<=53)}return[t,e]})();let yo=0;const pg=Promise.resolve(),gg=()=>{yo=0},mg=()=>yo||(pg.then(gg),yo=Lu());function an(t,e,n,s){t.addEventListener(e,n,s)}function yg(t,e,n,s){t.removeEventListener(e,n,s)}function vg(t,e,n,s,r=null){const i=t._vei||(t._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=wg(e);if(s){const c=i[e]=Eg(s,r);an(t,a,c,l)}else o&&(yg(t,a,o,l),i[e]=void 0)}}const Pl=/(?:Once|Passive|Capture)$/;function wg(t){let e;if(Pl.test(t)){e={};let s;for(;s=t.match(Pl);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Wn(t.slice(2)),e]}function Eg(t,e){const n=s=>{const r=s.timeStamp||Lu();(dg||r>=n.attached-1)&&Ze(bg(s,n.value),e,5,[s])};return n.value=t,n.attached=mg(),n}function bg(t,e){if(B(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Fl=/^on[a-z]/,Ig=(t,e,n,s,r=!1,i,o,a,l)=>{e==="class"?lg(t,s,r):e==="style"?cg(t,n,s):Kr(e)?Wo(e)||vg(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Tg(t,e,s,r))?fg(t,e,s,i,o,a,l):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),hg(t,e,s,r))};function Tg(t,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&Fl.test(e)&&H(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Fl.test(e)&&Te(n)?!1:e in t}const _g={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};dp.props;const Sr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return B(e)?n=>pr(e,n):e};function Cg(t){t.target.composing=!0}function Vl(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const rs={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t._assign=Sr(r);const i=s||r.props&&r.props.type==="number";an(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=to(a)),t._assign(a)}),n&&an(t,"change",()=>{t.value=t.value.trim()}),e||(an(t,"compositionstart",Cg),an(t,"compositionend",Vl),an(t,"change",Vl))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:s,number:r}},i){if(t._assign=Sr(i),t.composing||document.activeElement===t&&t.type!=="range"&&(n||s&&t.value.trim()===e||(r||t.type==="number")&&to(t.value)===e))return;const o=e==null?"":e;t.value!==o&&(t.value=o)}},ft={created(t,{value:e},n){t.checked=br(e,n.props.value),t._assign=Sr(n),an(t,"change",()=>{t._assign(Ag(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t._assign=Sr(s),e!==n&&(t.checked=br(e,s.props.value))}};function Ag(t){return"_value"in t?t._value:t.value}const Sg=Le({patchProp:Ig},ag);let Ul;function Dg(){return Ul||(Ul=Up(Sg))}const Ng=(...t)=>{const e=Dg().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=kg(s);if(!r)return;const i=e._component;!H(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function kg(t){return Te(t)?document.querySelector(t):t}const En=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},xg={name:"Main",data(){return{genders:["Man","Kvinna","Annat/Svara ej"],ages:["Yngre \xE4n 14","15-17","18-20","21-25","26-35","\xC4ldre \xE4n 36","Svara ej"],gender:"other",age:"other",userId:localStorage.getItem("userId")}},methods:{async send(){localStorage.getItem("userId")===null&&localStorage.setItem("userId",Mg(8)),await vt.setDoc(vt.doc(vt.db,"users",localStorage.getItem("userId")),{gender:this.gender,age:this.age},{merge:!0}),this.gender="other",this.age="other",this.userId=localStorage.getItem("userId")},clear(){localStorage.clear(),this.userId=localStorage.getItem("userId")}}};function Mg(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=n.length,r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*s));return e}const Rg=g("h1",null,"V\xE4lkommen!",-1),Og={action:""},Lg=g("h2",null,"Vad \xE4r ditt k\xF6n?",-1),Pg={for:"g0"},Fg=g("br",null,null,-1),Vg={for:"g1"},Ug=g("br",null,null,-1),Bg={for:"g2"},$g=g("br",null,null,-1),jg={action:""},Hg=g("h2",null,"Hur gammal \xE4r du?",-1),qg={for:"a0"},Kg=g("br",null,null,-1),zg={for:"a1"},Wg=g("br",null,null,-1),Gg={for:"a2"},Qg=g("br",null,null,-1),Yg={for:"a3"},Xg=g("br",null,null,-1),Jg={for:"a4"},Zg=g("br",null,null,-1),em={for:"a5"},tm=g("br",null,null,-1),nm={for:"a6"},sm=g("br",null,null,-1),rm={href:"#/intro"};function im(t,e,n,s,r,i){return Je(),yt("section",null,[Rg,g("form",Og,[Lg,Ve(g("input",{type:"radio",id:"g0",value:"male","onUpdate:modelValue":e[0]||(e[0]=o=>r.gender=o)},null,512),[[ft,r.gender]]),g("label",Pg,ae(r.genders[0]),1),Fg,Ve(g("input",{type:"radio",id:"g1",value:"female","onUpdate:modelValue":e[1]||(e[1]=o=>r.gender=o)},null,512),[[ft,r.gender]]),g("label",Vg,ae(r.genders[1]),1),Ug,Ve(g("input",{type:"radio",id:"g2",value:"other","onUpdate:modelValue":e[2]||(e[2]=o=>r.gender=o)},null,512),[[ft,r.gender]]),g("label",Bg,ae(r.genders[2]),1),$g]),g("form",jg,[Hg,Ve(g("input",{type:"radio",id:"a0",value:"14-","onUpdate:modelValue":e[3]||(e[3]=o=>r.age=o)},null,512),[[ft,r.age]]),g("label",qg,ae(r.ages[0]),1),Kg,Ve(g("input",{type:"radio",id:"a1",value:"15-17","onUpdate:modelValue":e[4]||(e[4]=o=>r.age=o)},null,512),[[ft,r.age]]),g("label",zg,ae(r.ages[1]),1),Wg,Ve(g("input",{type:"radio",id:"a2",value:"18-20","onUpdate:modelValue":e[5]||(e[5]=o=>r.age=o)},null,512),[[ft,r.age]]),g("label",Gg,ae(r.ages[2]),1),Qg,Ve(g("input",{type:"radio",id:"a3",value:"21-25","onUpdate:modelValue":e[6]||(e[6]=o=>r.age=o)},null,512),[[ft,r.age]]),g("label",Yg,ae(r.ages[3]),1),Xg,Ve(g("input",{type:"radio",id:"a4",value:"26-35","onUpdate:modelValue":e[7]||(e[7]=o=>r.age=o)},null,512),[[ft,r.age]]),g("label",Jg,ae(r.ages[4]),1),Zg,Ve(g("input",{type:"radio",id:"a5",value:"36+","onUpdate:modelValue":e[8]||(e[8]=o=>r.age=o)},null,512),[[ft,r.age]]),g("label",em,ae(r.ages[5]),1),tm,Ve(g("input",{type:"radio",id:"a6",value:"other","onUpdate:modelValue":e[9]||(e[9]=o=>r.age=o)},null,512),[[ft,r.age]]),g("label",nm,ae(r.ages[6]),1),sm]),g("a",rm,[g("button",{onClick:e[10]||(e[10]=o=>i.send())},"N\xE4sta")])])}const om=En(xg,[["render",im]]),am={name:"Intro"},lm=g("h1",null,"Hur fungerar denna studie?",-1),cm=g("p",null,"Du kommer att se ett enkelt, tecknat ansikte p\xE5 sk\xE4rmen och din uppgift \xE4r att bed\xF6ma vad f\xF6r personlighet du tycker ansiktet har. N\xE4r du har gjort din bed\xF6mning klickar du p\xE5 'N\xE4sta' f\xF6r att bed\xF6ma fler ansikten eller p\xE5 'Avsluta' f\xF6r att... avsluta.",-1),um=g("p",null,"Bed\xF6m g\xE4rna s\xE5 m\xE5nga ansikten du har tid f\xF6r. Ju fler ansikten du bed\xF6mer, desto mer data f\xE5r jag till mitt gymnasiearbete.",-1),hm=g("a",{href:"#/image"},[g("button",null,"B\xF6rja!")],-1),fm=[lm,cm,um,hm];function dm(t,e,n,s,r,i){return Je(),yt("section",null,fm)}const pm=En(am,[["render",dm]]),gm="/Gymnasiearbete/assets/loading.d5096498.webp",mm={name:"Image",data(){return{eyeSize:Math.floor(Math.random()*10+1)/10,pupilSize:Math.floor(Math.random()*10+1)/10,eyeType:Math.floor(Math.random()*4),alert:!1,loading:!1,sliderInputs:[0,0,0,0,0],cats:[["Dum","Neutral","Intelligent"],["Lat","Neutral","Ambiti\xF6s"],["Taskig","Neutral","Sn\xE4ll"],["Impulsiv","Neutral","Eftert\xE4nksam"],["Mesig","Neutral","Cool"]]}},methods:{async Send(){let t=0;for(let e=0;e<this.sliderInputs.length;e++)this.sliderInputs[e]=parseInt(this.sliderInputs[e],10),this.sliderInputs[e]==0&&t++;if(t==5&&this.alert==!1)this.alert=!0;else{this.alert=!1,this.loading=!0;const e=new Date().getTime(),n=new Date(e);let s=JSON.parse(localStorage.getItem("count"));s==null&&(s=0);let r=JSON.stringify(s+1);localStorage.setItem("count",r),await vt.updateDoc(vt.doc(vt.db,"users",localStorage.getItem("userId")),{faces:vt.arrayUnion({timestamp:n,count:s,face:{eyeSize:this.eyeSize,pupilSize:this.pupilSize,eyeType:this.eyeType},values:this.sliderInputs})});for(let i=0;i<this.sliderInputs.length;i++)this.sliderInputs[i]=0;this.eyeSize=Math.ceil(Math.sqrt(Math.random())*10)/10,this.pupilSize=Math.ceil(Math.sqrt(Math.random())*10)/10,this.eyeType=Math.floor(Math.random()*4),Bl(this.eyeSize,this.pupilSize,this.eyeType),this.loading=!1,window.scrollTo(0,0)}}},mounted(){console.log(this.eyeSize),Bl(this.eyeSize,this.pupilSize,this.eyeType)}};function Bl(t,e,n){const s=document.getElementById("canvas");if(s.getContext){const r=s.getContext("2d");r.clearRect(0,0,s.width,s.height),r.lineWidth=2,r.beginPath(),r.arc(75,75,50,0,Math.PI*2,!0),r.stroke(),r.beginPath(),r.arc(75,55,50,1,Math.PI-1,!1),r.stroke(),ym(+n,r,55,65,t,e)}}function ym(t,e,n,s,r,i){switch(t){case 0:r*=18,i*=1,e.beginPath(),e.arc(n,s,r,0,Math.PI*2),e.stroke(),e.beginPath(),e.arc(150-n,s,r,0,Math.PI*2),e.stroke(),e.beginPath(),e.arc(n,s,r*i,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(150-n,s,r*i,0,Math.PI*2),e.fill();break;case 1:r*=18,i*=1,e.beginPath(),e.arc(n,s-r/2,r,Math.PI,0,!1),e.lineTo(n+r,s+r/2),e.arc(n,s+r/2,r,0,Math.PI,!1),e.lineTo(n-r,s-r/2),e.stroke(),e.beginPath(),e.arc(150-n,s-r/2,r,Math.PI,0,!1),e.lineTo(150-n+r,s+r/2),e.arc(150-n,s+r/2,r,0,Math.PI,!1),e.lineTo(150-n-r,s-r/2),e.stroke(),e.beginPath(),e.arc(n,s,r*i,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(150-n,s,r*i,0,Math.PI*2),e.fill();break;case 2:r*=10,i*=1.5,e.beginPath(),e.arc(n,s+r*.58,r*2,Math.PI*2-.3,Math.PI+.3,!0),e.arc(n,s-r*.58,r*2,Math.PI-.3,.3,!0),e.stroke(),e.beginPath(),e.arc(150-n,s+r*.58,r*2,Math.PI*2-.3,Math.PI+.3,!0),e.arc(150-n,s-r*.58,r*2,Math.PI-.3,.3,!0),e.stroke(),e.beginPath(),e.arc(n,s,r*i,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(150-n,s,r*i,0,Math.PI*2),e.fill();break;case 3:r*=11,i*=1.1,e.beginPath(),e.arc(n,s+r*.95,r*2,Math.PI*2-.5,Math.PI+.5,!0),e.arc(n,s-r*.95,r*2,Math.PI-.5,.5,!0),e.stroke(),e.beginPath(),e.arc(150-n,s+r*.95,r*2,Math.PI*2-.5,Math.PI+.5,!0),e.arc(150-n,s-r*.95,r*2,Math.PI-.5,.5,!0),e.stroke(),e.beginPath(),e.arc(n,s,r*i,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(150-n,s,r*i,0,Math.PI*2),e.fill();break}}const vm=g("canvas",{id:"canvas",width:"150",height:"150"},null,-1),wm=g("h2",null,"Vilka personlighetsdrag tycker du detta ansiktet har?",-1),Em={class:"sliderContainer"},bm={class:"sliderLabels"},Im=g("div",{class:"sliderBlobs"},[g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span")],-1),Tm={class:"sliderContainer"},_m={class:"sliderLabels"},Cm=g("div",{class:"sliderBlobs"},[g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span")],-1),Am={class:"sliderContainer"},Sm={class:"sliderLabels"},Dm=g("div",{class:"sliderBlobs"},[g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span")],-1),Nm={class:"sliderContainer"},km={class:"sliderLabels"},xm=g("div",{class:"sliderBlobs"},[g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span")],-1),Mm={class:"sliderContainer"},Rm={class:"sliderLabels"},Om=g("div",{class:"sliderBlobs"},[g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span"),g("span")],-1),Lm={key:0,class:"alert"},Pm={key:1,class:"buttonContainer"},Fm=g("a",{href:"#/exit"},[g("button",null,"Avsluta")],-1),Vm={key:2,class:"loading",src:gm,alt:"Loading icon"};function Um(t,e,n,s,r,i){return Je(),yt("section",null,[vm,wm,g("div",Em,[g("div",bm,[g("h3",null,ae(r.cats[0][0]),1),g("h3",null,ae(r.cats[0][1]),1),g("h3",null,ae(r.cats[0][2]),1)]),Im,Ve(g("input",{type:"range",min:"-4",max:"4","onUpdate:modelValue":e[0]||(e[0]=o=>r.sliderInputs[0]=o)},null,512),[[rs,r.sliderInputs[0]]])]),g("div",Tm,[g("div",_m,[g("h3",null,ae(r.cats[1][0]),1),g("h3",null,ae(r.cats[1][1]),1),g("h3",null,ae(r.cats[1][2]),1)]),Cm,Ve(g("input",{type:"range",min:"-4",max:"4","onUpdate:modelValue":e[1]||(e[1]=o=>r.sliderInputs[1]=o)},null,512),[[rs,r.sliderInputs[1]]])]),g("div",Am,[g("div",Sm,[g("h3",null,ae(r.cats[2][0]),1),g("h3",null,ae(r.cats[2][1]),1),g("h3",null,ae(r.cats[2][2]),1)]),Dm,Ve(g("input",{type:"range",min:"-4",max:"4","onUpdate:modelValue":e[2]||(e[2]=o=>r.sliderInputs[2]=o)},null,512),[[rs,r.sliderInputs[2]]])]),g("div",Nm,[g("div",km,[g("h3",null,ae(r.cats[3][0]),1),g("h3",null,ae(r.cats[3][1]),1),g("h3",null,ae(r.cats[3][2]),1)]),xm,Ve(g("input",{type:"range",min:"-4",max:"4","onUpdate:modelValue":e[3]||(e[3]=o=>r.sliderInputs[3]=o)},null,512),[[rs,r.sliderInputs[3]]])]),g("div",Mm,[g("div",Rm,[g("h3",null,ae(r.cats[4][0]),1),g("h3",null,ae(r.cats[4][1]),1),g("h3",null,ae(r.cats[4][2]),1)]),Om,Ve(g("input",{type:"range",min:"-4",max:"4","onUpdate:modelValue":e[4]||(e[4]=o=>r.sliderInputs[4]=o)},null,512),[[rs,r.sliderInputs[4]]])]),r.alert?(Je(),yt("p",Lm,"Du har inte \xE4ndrat n\xE5gra v\xE4rden. \xC4r du s\xE4ker p\xE5 att du vill forts\xE4tta?")):Ui("",!0),r.loading?Ui("",!0):(Je(),yt("div",Pm,[Fm,g("a",null,[g("button",{onClick:e[5]||(e[5]=o=>i.Send())},"N\xE4sta")])])),r.loading?(Je(),yt("img",Vm)):Ui("",!0)])}const Bm=En(mm,[["render",Um]]),$m={name:"Exit",methods:{Reset(){localStorage.clear()}}},jm=g("h1",null,"Tack f\xF6r ditt bidrag!",-1),Hm=g("p",null,"Dina knapptryck har bidragit till ett tydligare resultat i mitt gymnasiearbete!",-1),qm=g("p",null,[bs("Du f\xE5r g\xE4rna "),g("a",{href:"#/image"},"bidra mer"),bs(" om du har tid.")],-1);function Km(t,e,n,s,r,i){return Je(),yt("section",null,[jm,Hm,qm,g("p",null,[bs("Vill n\xE5gon anna ocks\xE5 bidra p\xE5 denna enhet? "),g("a",{href:"#/",onClick:e[0]||(e[0]=o=>i.Reset())},"Starta om"),bs(" h\xE4r. (Alla tidigare bidrag finns kvar.)")])])}const zm=En($m,[["render",Km]]),Wm={name:"Export",methods:{async Export(){(await vt.getDocs(vt.collection(vt.db,"users"))).forEach(e=>{console.log(e.data())})}}},Gm=g("h1",null,"Click button to export all data from firestore",-1),Qm={class:"buttonContainer"};function Ym(t,e,n,s,r,i){return Je(),yt("section",null,[Gm,g("div",Qm,[g("button",{onClick:e[0]||(e[0]=o=>i.Export())},"Export")])])}const Xm=En(Wm,[["render",Ym]]),Jm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAE30lEQVR4AezaU7QlRxSA4dxch/eunti28xbbtm3btu28xLZt287Ytmfnj121z67uOfvM7X+t73nQp6u6MFWZs8rKysrKysrKysrKMqyHQ3AlnsaX6IxekN/0Qmd8iadxJQ7BeshQpqwFG+NSfAzJyce4FBujBf+obDXcjKGQgg3FzVgNHbom7IfvIVXyPfZDU0cbZg5HT4gTPXF4RxieNsIPEKd+wEaY4pobD0FqxEOYG1NEm2EwpMYMxmao2RpxOSRRfzyAM7E9lse8mBW/NyvmxfLYHmfiAfSHJLocjaip2vEaxOgDHIOlkdrSOAYfQIxeQztqojnwOaRCw3EplkRRLYlLMRxSoc8xB1y3MLpAKjAEZyHD5CrDWRgCqUAXLAyXzWH4z78VM6NazYxbDQ9hDo9j/mcQpc5YDV5aDZ0hSp95mhOaKpxwH0IbvNWGhyqcmJtQ5fSfmpNwPLx3PCapP1Gr3ObKv+x47JbDHtImuBavoBsEw9EZn+AabIcZkNJuGK/8UW1eze2FQcr//M1gbXZch+EQpWG4AvPB2mbKhzCoWtsWDyl/IbvBUiPOxSiI0Sgcg3pY2k35hj9UjV1NUTgelubAW5CcvI4sYU4QhY0wWWrFDwX+KhZFH0jOvsI8Bb7tP6AVhXe48ju/rbDFnN2Xxgm6TblOOByF1oweinF/NeOY/yGkYI9jauNiLTYf9EAzCms/5fZCvmNt/vaCJc22xX4opDp8r9hYmwWVNi9GQhR+xHFYFp0wA5bEkfgCotDXOETOotjA+x51yL1VIRFnwtJFyvXESWjA/1WPwzAOEnEyLJ0JiVgVuXezYj8/M84r/RX/+VtB2/qKh9DZOBdkikXhzci1VsWrdyksrQOJOBWVdgQkYg1YulQxFLcitzaGRCwJSztAAroaz2TrFSdzp8HSkpCIjWHI9sQ/hLWVIQEHw9rBkICnYe1D84hg6GNIwNFI6THIf3gPTbC2aPztMnd09EJwTnXCREjA0jnMMRehFwT9cD3akVIjJGAkrC0NCZiITtBnnCT7oQ7+ij+AEbBWh36QgHWgzziO3g+vLR+/apLU/fr5y95VkIAz4LXjIAH3IaUzIAFXIblnIQE7wmMzKhZ4eyClHSEBzyK5TyEBK8Jb9XhUsViaFimtCAn4FMl1hgTM63DivR0ScRRSmze+3ZFa/DXO4KUML0Ii3kI9UsviN7vTGwMJaIKHlleepnXGrMijJkjAmI7yAHZT3p7ojoVBtfMAvA9BJ0MUvovPV96GIP+T8KkQhXcxMyL5nISjn6HOr0U+Ef/c9P0Z6nEh1q68FnkXGhDP1ULM/1bEmZCIRzT/+f62Ivxvxs2oOB7tjBkRzd9mnP/t6K0hEWsi/wzb0e4PZAxdAwl4D/lnPJBxfyRp6IM8b70VfCTp/1De0ABIwILIP9uhvP9rKYZ+au8OLACAgRiK7r91RziEPvhvgaIASe4IXA2TMySW4oNZlA9m+Wii56OJPJzr+XAujadDIJ7uCxqD+/2dL2iQipL/AF9R4iU9/wG+pMdrqugDQE0VFLX9B/iitp8q8B/gpwr8WIf/AD/W4edq/Af4uZpdg01Yk2Veo31es5Vew61e08VY491A8/VABxyATpgAHfEBOmMFdMgN6JRhOub5WedskyRJkuQBS9AgzkzEKQEAAAAASUVORK5CYII=",Zm={name:"Info",data(){return{info:!1}},methods:{toggle(){this.info=!this.info}}},ey=g("h2",{class:"x"},"X",-1),ty=g("h2",null,"Vad \xE4r detta f\xF6r projekt?",-1),ny=g("p",null,"Det h\xE4r \xE4r ett gymnasiearbete som unders\xF6ker vilka faktorer i en tecknad karakt\xE4rs \xF6gon som \xE4r mer eller mindre betydande f\xF6r hur ansiktets personlighet uppfattas.",-1),sy=g("p",null,"Syftet \xE4r att kunna utforma b\xE4ttre riktlinjer f\xF6r karakt\xE4rsdesign.",-1),ry=g("a",{href:"https://github.com/Fyrgeit/Gymnasiearbete"},"GitHub repository",-1),iy=[ey,ty,ny,sy,ry];function oy(t,e,n,s,r,i){return Je(),yt("div",{class:Nn(["info",{infoExpand:r.info}]),onClick:e[0]||(e[0]=o=>i.toggle())},[g("img",{class:Nn({imgHide:r.info}),src:Jm,alt:""},null,2),g("div",{class:Nn(["infoContent",{infoContentExpand:r.info}])},iy,2)],2)}const ay=En(Zm,[["render",oy]]),ly={"/":om,"/intro":pm,"/image":Bm,"/exit":zm,"/export":Xm},cy={components:{Info:ay},data(){return{currentPath:window.location.hash}},computed:{currentView(){return ly[this.currentPath.slice(1)||"/"]||NotFound}},mounted(){window.addEventListener("hashchange",()=>{this.currentPath=window.location.hash})}};function uy(t,e,n,s,r,i){const o=_p("Info");return Je(),yt(st,null,[wt(o),(Je(),xu(Cp(i.currentView)))],64)}const hy=En(cy,[["render",uy]]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},fy=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},dy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(p=64)),s.push(n[u],n[f],n[p],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Pu(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fy(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||c==null||f==null)throw Error();const p=i<<2|a>>4;if(s.push(p),c!==64){const y=a<<4&240|c>>2;if(s.push(y),f!==64){const _=c<<6&192|f;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},py=function(t){const e=Pu(t);return dy.encodeByteArray(e,!0)},Fu=function(t){return py(t).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function my(){return typeof indexedDB=="object"}function yy(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="FirebaseError";class Yn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=vy,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vu.prototype.create)}}class Vu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?wy(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Yn(r,a,s)}}function wy(t,e){return t.replace(Ey,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Ey=/\{\$([^}]+)}/g;function vo(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if($l(i)&&$l(o)){if(!vo(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function $l(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t){return t&&t._delegate?t._delegate:t}class Ts{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new gy;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ty(e))try{this.getOrInitializeService({instanceIdentifier:nn})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=nn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nn){return this.instances.has(e)}getOptions(e=nn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(!!s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Iy(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=nn){return this.component?this.component.multipleInstances?e:nn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Iy(t){return t===nn?void 0:t}function Ty(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new by(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Y||(Y={}));const Cy={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},Ay=Y.INFO,Sy={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},Dy=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Sy[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uu{constructor(e){this.name=e,this._logLevel=Ay,this._logHandler=Dy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Y))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cy[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...e),this._logHandler(this,Y.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...e),this._logHandler(this,Y.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...e),this._logHandler(this,Y.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...e),this._logHandler(this,Y.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...e),this._logHandler(this,Y.ERROR,...e)}}const Ny=(t,e)=>e.some(n=>t instanceof n);let jl,Hl;function ky(){return jl||(jl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xy(){return Hl||(Hl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bu=new WeakMap,wo=new WeakMap,$u=new WeakMap,$i=new WeakMap,fa=new WeakMap;function My(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ut(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Bu.set(n,t)}).catch(()=>{}),fa.set(e,t),e}function Ry(t){if(wo.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});wo.set(t,e)}let Eo={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wo.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$u.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ut(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Oy(t){Eo=t(Eo)}function Ly(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(ji(this),e,...n);return $u.set(s,e.sort?e.sort():[e]),Ut(s)}:xy().includes(t)?function(...e){return t.apply(ji(this),e),Ut(Bu.get(this))}:function(...e){return Ut(t.apply(ji(this),e))}}function Py(t){return typeof t=="function"?Ly(t):(t instanceof IDBTransaction&&Ry(t),Ny(t,ky())?new Proxy(t,Eo):t)}function Ut(t){if(t instanceof IDBRequest)return My(t);if($i.has(t))return $i.get(t);const e=Py(t);return e!==t&&($i.set(t,e),fa.set(e,t)),e}const ji=t=>fa.get(t);function Fy(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Ut(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Ut(o.result),l.oldVersion,l.newVersion,Ut(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const Vy=["get","getKey","getAll","getAllKeys","count"],Uy=["put","add","delete","clear"],Hi=new Map;function ql(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hi.get(e))return Hi.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=Uy.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Vy.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Hi.set(e,i),i}Oy(t=>({...t,get:(e,n,s)=>ql(e,n)||t.get(e,n,s),has:(e,n)=>!!ql(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($y(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function $y(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bo="@firebase/app",Kl="0.7.33";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn=new Uu("@firebase/app"),jy="@firebase/app-compat",Hy="@firebase/analytics-compat",qy="@firebase/analytics",Ky="@firebase/app-check-compat",zy="@firebase/app-check",Wy="@firebase/auth",Gy="@firebase/auth-compat",Qy="@firebase/database",Yy="@firebase/database-compat",Xy="@firebase/functions",Jy="@firebase/functions-compat",Zy="@firebase/installations",ev="@firebase/installations-compat",tv="@firebase/messaging",nv="@firebase/messaging-compat",sv="@firebase/performance",rv="@firebase/performance-compat",iv="@firebase/remote-config",ov="@firebase/remote-config-compat",av="@firebase/storage",lv="@firebase/storage-compat",cv="@firebase/firestore",uv="@firebase/firestore-compat",hv="firebase",fv="9.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju="[DEFAULT]",dv={[bo]:"fire-core",[jy]:"fire-core-compat",[qy]:"fire-analytics",[Hy]:"fire-analytics-compat",[zy]:"fire-app-check",[Ky]:"fire-app-check-compat",[Wy]:"fire-auth",[Gy]:"fire-auth-compat",[Qy]:"fire-rtdb",[Yy]:"fire-rtdb-compat",[Xy]:"fire-fn",[Jy]:"fire-fn-compat",[Zy]:"fire-iid",[ev]:"fire-iid-compat",[tv]:"fire-fcm",[nv]:"fire-fcm-compat",[sv]:"fire-perf",[rv]:"fire-perf-compat",[iv]:"fire-rc",[ov]:"fire-rc-compat",[av]:"fire-gcs",[lv]:"fire-gcs-compat",[cv]:"fire-fst",[uv]:"fire-fst-compat","fire-js":"fire-js",[hv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Map,Io=new Map;function pv(t,e){try{t.container.addComponent(e)}catch(n){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Nr(t){const e=t.name;if(Io.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;Io.set(e,t);for(const n of Dr.values())pv(n,t);return!0}function gv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},yn=new Vu("app","Firebase",mv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=fv;function wv(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:ju,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw yn.create("bad-app-name",{appName:String(s)});const r=Dr.get(s);if(r){if(vo(t,r.options)&&vo(n,r.config))return r;throw yn.create("duplicate-app",{appName:s})}const i=new _y(s);for(const a of Io.values())i.addComponent(a);const o=new yv(t,n,i);return Dr.set(s,o),o}function Ev(t=ju){const e=Dr.get(t);if(!e)throw yn.create("no-app",{appName:t});return e}function On(t,e,n){var s;let r=(s=dv[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(a.join(" "));return}Nr(new Ts(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="firebase-heartbeat-database",Iv=1,_s="firebase-heartbeat-store";let qi=null;function Hu(){return qi||(qi=Fy(bv,Iv,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_s)}}}).catch(t=>{throw yn.create("idb-open",{originalErrorMessage:t.message})})),qi}async function Tv(t){var e;try{return(await Hu()).transaction(_s).objectStore(_s).get(qu(t))}catch(n){if(n instanceof Yn)mn.warn(n.message);else{const s=yn.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});mn.warn(s.message)}}}async function zl(t,e){var n;try{const r=(await Hu()).transaction(_s,"readwrite");return await r.objectStore(_s).put(e,qu(t)),r.done}catch(s){if(s instanceof Yn)mn.warn(s.message);else{const r=yn.create("idb-set",{originalErrorMessage:(n=s)===null||n===void 0?void 0:n.message});mn.warn(r.message)}}}function qu(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=1024,Cv=30*24*60*60*1e3;class Av{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Dv(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Wl();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const i=new Date(r.date).valueOf();return Date.now()-i<=Cv}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Wl(),{heartbeatsToSend:n,unsentEntries:s}=Sv(this._heartbeatsCache.heartbeats),r=Fu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Wl(){return new Date().toISOString().substring(0,10)}function Sv(t,e=_v){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Gl(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Gl(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Dv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return my()?yy().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Tv(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return zl(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return zl(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Gl(t){return Fu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){Nr(new Ts("platform-logger",e=>new By(e),"PRIVATE")),Nr(new Ts("heartbeat",e=>new Av(e),"PRIVATE")),On(bo,Kl,t),On(bo,Kl,"esm2017"),On("fire-js","")}Nv("");var kv="firebase",xv="9.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(kv,xv,"app");var Mv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k,da=da||{},V=Mv||self;function kr(){}function ti(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Fs(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Rv(t){return Object.prototype.hasOwnProperty.call(t,Ki)&&t[Ki]||(t[Ki]=++Ov)}var Ki="closure_uid_"+(1e9*Math.random()>>>0),Ov=0;function Lv(t,e,n){return t.call.apply(t.bind,arguments)}function Pv(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Re(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Re=Lv:Re=Pv,Re.apply(null,arguments)}function or(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function ke(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(s,r,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(s,o)}}function Gt(){this.s=this.s,this.o=this.o}var Fv=0;Gt.prototype.s=!1;Gt.prototype.na=function(){!this.s&&(this.s=!0,this.M(),Fv!=0)&&Rv(this)};Gt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ku=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function pa(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function Ql(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(ti(s)){const r=t.length||0,i=s.length||0;t.length=r+i;for(let o=0;o<i;o++)t[r+o]=s[o]}else t.push(s)}}function Oe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var Vv=function(){if(!V.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{V.addEventListener("test",kr,e),V.removeEventListener("test",kr,e)}catch{}return t}();function xr(t){return/^[\s\xa0]*$/.test(t)}var Yl=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function zi(t,e){return t<e?-1:t>e?1:0}function ni(){var t=V.navigator;return t&&(t=t.userAgent)?t:""}function mt(t){return ni().indexOf(t)!=-1}function ga(t){return ga[" "](t),t}ga[" "]=kr;function Uv(t){var e=jv;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var Bv=mt("Opera"),Vn=mt("Trident")||mt("MSIE"),zu=mt("Edge"),To=zu||Vn,Wu=mt("Gecko")&&!(ni().toLowerCase().indexOf("webkit")!=-1&&!mt("Edge"))&&!(mt("Trident")||mt("MSIE"))&&!mt("Edge"),$v=ni().toLowerCase().indexOf("webkit")!=-1&&!mt("Edge");function Gu(){var t=V.document;return t?t.documentMode:void 0}var Mr;e:{var Wi="",Gi=function(){var t=ni();if(Wu)return/rv:([^\);]+)(\)|;)/.exec(t);if(zu)return/Edge\/([\d\.]+)/.exec(t);if(Vn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if($v)return/WebKit\/(\S+)/.exec(t);if(Bv)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Gi&&(Wi=Gi?Gi[1]:""),Vn){var Qi=Gu();if(Qi!=null&&Qi>parseFloat(Wi)){Mr=String(Qi);break e}}Mr=Wi}var jv={};function Hv(){return Uv(function(){let t=0;const e=Yl(String(Mr)).split("."),n=Yl("9").split("."),s=Math.max(e.length,n.length);for(let o=0;t==0&&o<s;o++){var r=e[o]||"",i=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r[0].length==0&&i[0].length==0)break;t=zi(r[1].length==0?0:parseInt(r[1],10),i[1].length==0?0:parseInt(i[1],10))||zi(r[2].length==0,i[2].length==0)||zi(r[2],i[2]),r=r[3],i=i[3]}while(t==0)}return 0<=t})}var _o;if(V.document&&Vn){var Xl=Gu();_o=Xl||parseInt(Mr,10)||void 0}else _o=void 0;var qv=_o;function Cs(t,e){if(Oe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Wu){e:{try{ga(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Kv[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Cs.X.h.call(this)}}ke(Cs,Oe);var Kv={2:"touch",3:"pen",4:"mouse"};Cs.prototype.h=function(){Cs.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Vs="closure_listenable_"+(1e6*Math.random()|0),zv=0;function Wv(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ha=r,this.key=++zv,this.ba=this.ea=!1}function si(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function ma(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function Qu(t){const e={};for(const n in t)e[n]=t[n];return e}const Jl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yu(t,e){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)t[n]=s[n];for(let i=0;i<Jl.length;i++)n=Jl[i],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function ri(t){this.src=t,this.g={},this.h=0}ri.prototype.add=function(t,e,n,s,r){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Ao(t,e,s,r);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new Wv(e,this.src,i,!!s,r),e.ea=n,t.push(e)),e};function Co(t,e){var n=e.type;if(n in t.g){var s=t.g[n],r=Ku(s,e),i;(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(si(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ao(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.ba&&i.listener==e&&i.capture==!!n&&i.ha==s)return r}return-1}var ya="closure_lm_"+(1e6*Math.random()|0),Yi={};function Xu(t,e,n,s,r){if(s&&s.once)return Zu(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Xu(t,e[i],n,s,r);return null}return n=Ea(n),t&&t[Vs]?t.N(e,n,Fs(s)?!!s.capture:!!s,r):Ju(t,e,n,!1,s,r)}function Ju(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=Fs(r)?!!r.capture:!!r,a=wa(t);if(a||(t[ya]=a=new ri(t)),n=a.add(e,n,s,o,i),n.proxy)return n;if(s=Gv(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)Vv||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(th(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Gv(){function t(n){return e.call(t.src,t.listener,n)}const e=Qv;return t}function Zu(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Zu(t,e[i],n,s,r);return null}return n=Ea(n),t&&t[Vs]?t.O(e,n,Fs(s)?!!s.capture:!!s,r):Ju(t,e,n,!0,s,r)}function eh(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)eh(t,e[i],n,s,r);else s=Fs(s)?!!s.capture:!!s,n=Ea(n),t&&t[Vs]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Ao(i,n,s,r),-1<n&&(si(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=wa(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ao(e,n,s,r)),(n=-1<t?e[t]:null)&&va(n))}function va(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Vs])Co(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(th(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=wa(e))?(Co(n,t),n.h==0&&(n.src=null,e[ya]=null)):si(t)}}}function th(t){return t in Yi?Yi[t]:Yi[t]="on"+t}function Qv(t,e){if(t.ba)t=!0;else{e=new Cs(e,this);var n=t.listener,s=t.ha||t.src;t.ea&&va(t),t=n.call(s,e)}return t}function wa(t){return t=t[ya],t instanceof ri?t:null}var Xi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ea(t){return typeof t=="function"?t:(t[Xi]||(t[Xi]=function(e){return t.handleEvent(e)}),t[Xi])}function _e(){Gt.call(this),this.i=new ri(this),this.P=this,this.I=null}ke(_e,Gt);_e.prototype[Vs]=!0;_e.prototype.removeEventListener=function(t,e,n,s){eh(this,t,e,n,s)};function De(t,e){var n,s=t.I;if(s)for(n=[];s;s=s.I)n.push(s);if(t=t.P,s=e.type||e,typeof e=="string")e=new Oe(e,t);else if(e instanceof Oe)e.target=e.target||t;else{var r=e;e=new Oe(s,t),Yu(e,r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=ar(o,s,!0,e)&&r}if(o=e.g=t,r=ar(o,s,!0,e)&&r,r=ar(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)o=e.g=n[i],r=ar(o,s,!1,e)&&r}_e.prototype.M=function(){if(_e.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)si(n[s]);delete t.g[e],t.h--}}this.I=null};_e.prototype.N=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};_e.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function ar(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&Co(t.i,o),r=a.call(l,s)!==!1&&r}}return r&&!s.defaultPrevented}var ba=V.JSON.stringify;function Yv(){var t=rh;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Xv{constructor(){this.h=this.g=null}add(e,n){const s=nh.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var nh=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Jv,t=>t.reset());class Jv{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Zv(t){V.setTimeout(()=>{throw t},0)}function sh(t,e){So||ew(),Do||(So(),Do=!0),rh.add(t,e)}var So;function ew(){var t=V.Promise.resolve(void 0);So=function(){t.then(tw)}}var Do=!1,rh=new Xv;function tw(){for(var t;t=Yv();){try{t.h.call(t.g)}catch(n){Zv(n)}var e=nh;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Do=!1}function ii(t,e){_e.call(this),this.h=t||1,this.g=e||V,this.j=Re(this.kb,this),this.l=Date.now()}ke(ii,_e);k=ii.prototype;k.ca=!1;k.R=null;k.kb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),De(this,"tick"),this.ca&&(Ia(this),this.start()))}};k.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ia(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}k.M=function(){ii.X.M.call(this),Ia(this),delete this.g};function Ta(t,e,n){if(typeof t=="function")n&&(t=Re(t,n));else if(t&&typeof t.handleEvent=="function")t=Re(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:V.setTimeout(t,e||0)}function ih(t){t.g=Ta(()=>{t.g=null,t.i&&(t.i=!1,ih(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class nw extends Gt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ih(this)}M(){super.M(),this.g&&(V.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function As(t){Gt.call(this),this.h=t,this.g={}}ke(As,Gt);var Zl=[];function oh(t,e,n,s){Array.isArray(n)||(n&&(Zl[0]=n.toString()),n=Zl);for(var r=0;r<n.length;r++){var i=Xu(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function ah(t){ma(t.g,function(e,n){this.g.hasOwnProperty(n)&&va(e)},t),t.g={}}As.prototype.M=function(){As.X.M.call(this),ah(this)};As.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function oi(){this.g=!0}oi.prototype.Aa=function(){this.g=!1};function sw(t,e,n,s,r,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function rw(t,e,n,s,r,i,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+`
`+n+`
`+i+" "+o})}function Sn(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+ow(t,n)+(s?" "+s:"")})}function iw(t,e){t.info(function(){return"TIMEOUT: "+e})}oi.prototype.info=function(){};function ow(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return ba(n)}catch{return e}}var bn={},ec=null;function ai(){return ec=ec||new _e}bn.Oa="serverreachability";function lh(t){Oe.call(this,bn.Oa,t)}ke(lh,Oe);function Ss(t){const e=ai();De(e,new lh(e))}bn.STAT_EVENT="statevent";function ch(t,e){Oe.call(this,bn.STAT_EVENT,t),this.stat=e}ke(ch,Oe);function Be(t){const e=ai();De(e,new ch(e,t))}bn.Pa="timingevent";function uh(t,e){Oe.call(this,bn.Pa,t),this.size=e}ke(uh,Oe);function Us(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return V.setTimeout(function(){t()},e)}var li={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},hh={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function _a(){}_a.prototype.h=null;function tc(t){return t.h||(t.h=t.i())}function fh(){}var Bs={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function Ca(){Oe.call(this,"d")}ke(Ca,Oe);function Aa(){Oe.call(this,"c")}ke(Aa,Oe);var No;function ci(){}ke(ci,_a);ci.prototype.g=function(){return new XMLHttpRequest};ci.prototype.i=function(){return{}};No=new ci;function $s(t,e,n,s){this.l=t,this.j=e,this.m=n,this.U=s||1,this.S=new As(this),this.O=aw,t=To?125:void 0,this.T=new ii(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new dh}function dh(){this.i=null,this.g="",this.h=!1}var aw=45e3,ko={},Rr={};k=$s.prototype;k.setTimeout=function(t){this.O=t};function xo(t,e,n){t.K=1,t.v=hi(Nt(e)),t.s=n,t.P=!0,ph(t,null)}function ph(t,e){t.F=Date.now(),js(t),t.A=Nt(t.v);var n=t.A,s=t.U;Array.isArray(s)||(s=[String(s)]),Ih(n.i,"t",s),t.C=0,n=t.l.H,t.h=new dh,t.g=Hh(t.l,n?e:null,!t.s),0<t.N&&(t.L=new nw(Re(t.Ka,t,t.g),t.N)),oh(t.S,t.g,"readystatechange",t.hb),e=t.H?Qu(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Ss(),sw(t.j,t.u,t.A,t.m,t.U,t.s)}k.hb=function(t){t=t.target;const e=this.L;e&&At(t)==3?e.l():this.Ka(t)};k.Ka=function(t){try{if(t==this.g)e:{const u=At(this.g);var e=this.g.Ea();const f=this.g.aa();if(!(3>u)&&(u!=3||To||this.g&&(this.h.h||this.g.fa()||ic(this.g)))){this.I||u!=4||e==7||(e==8||0>=f?Ss(3):Ss(2)),ui(this);var n=this.g.aa();this.Y=n;t:if(gh(this)){var s=ic(this.g);t="";var r=s.length,i=At(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),hs(this);var o="";break t}this.h.i=new V.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,rw(this.j,this.u,this.A,this.m,this.U,u,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xr(a)){var c=a;break t}}c=null}if(n=c)Sn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Mo(this,n);else{this.i=!1,this.o=3,Be(12),cn(this),hs(this);break e}}this.P?(mh(this,u,o),To&&this.i&&u==3&&(oh(this.S,this.T,"tick",this.gb),this.T.start())):(Sn(this.j,this.m,o,null),Mo(this,o)),u==4&&cn(this),this.i&&!this.I&&(u==4?Uh(this.l,this):(this.i=!1,js(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Be(12)):(this.o=0,Be(13)),cn(this),hs(this)}}}catch{}finally{}};function gh(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function mh(t,e,n){let s=!0,r;for(;!t.I&&t.C<n.length;)if(r=lw(t,n),r==Rr){e==4&&(t.o=4,Be(14),s=!1),Sn(t.j,t.m,null,"[Incomplete Response]");break}else if(r==ko){t.o=4,Be(15),Sn(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else Sn(t.j,t.m,r,null),Mo(t,r);gh(t)&&r!=Rr&&r!=ko&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Be(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ra(e),e.K=!0,Be(11))):(Sn(t.j,t.m,n,"[Invalid Chunked Response]"),cn(t),hs(t))}k.gb=function(){if(this.g){var t=At(this.g),e=this.g.fa();this.C<e.length&&(ui(this),mh(this,t,e),this.i&&t!=4&&js(this))}};function lw(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?Rr:(n=Number(e.substring(n,s)),isNaN(n)?ko:(s+=1,s+n>e.length?Rr:(e=e.substr(s,n),t.C=s+n,e)))}k.cancel=function(){this.I=!0,cn(this)};function js(t){t.V=Date.now()+t.O,yh(t,t.O)}function yh(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Us(Re(t.fb,t),e)}function ui(t){t.B&&(V.clearTimeout(t.B),t.B=null)}k.fb=function(){this.B=null;const t=Date.now();0<=t-this.V?(iw(this.j,this.A),this.K!=2&&(Ss(),Be(17)),cn(this),this.o=2,hs(this)):yh(this,this.V-t)};function hs(t){t.l.G==0||t.I||Uh(t.l,t)}function cn(t){ui(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Ia(t.T),ah(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Mo(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Ro(n.h,t))){if(!t.J&&Ro(n.h,t)&&n.G==3){try{var s=n.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Pr(n),pi(n);else break e;Ma(n),Be(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&n.A==0&&!n.v&&(n.v=Us(Re(n.bb,n),6e3));if(1>=Ch(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else un(n,11)}else if((t.J||n.g==t)&&Pr(n),!xr(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.T=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.I=c[1],n.ka=c[2];const u=c[3];u!=null&&(n.ma=u,n.j.info("VER="+n.ma));const f=c[4];f!=null&&(n.Ca=f,n.j.info("SVER="+n.Ca));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(s=1.5*p,n.J=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const y=t.g;if(y){const _=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var i=s.h;i.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Sa(i,i.h),i.h=null))}if(s.D){const S=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(s.za=S,le(s.F,s.D,S))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),s=n;var o=t;if(s.sa=jh(s,s.H?s.ka:null,s.V),o.J){Ah(s.h,o);var a=o,l=s.J;l&&a.setTimeout(l),a.B&&(ui(a),js(a)),s.g=o}else Fh(s);0<n.i.length&&gi(n)}else c[0]!="stop"&&c[0]!="close"||un(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?un(n,7):xa(n):c[0]!="noop"&&n.l&&n.l.wa(c),n.A=0)}}Ss(4)}catch{}}function cw(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(ti(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function uw(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ti(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function vh(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ti(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=uw(t),s=cw(t),r=s.length,i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}var wh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hw(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function pn(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof pn){this.h=e!==void 0?e:t.h,Or(this,t.j),this.s=t.s,this.g=t.g,Lr(this,t.m),this.l=t.l,e=t.i;var n=new Ds;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),nc(this,n),this.o=t.o}else t&&(n=String(t).match(wh))?(this.h=!!e,Or(this,n[1]||"",!0),this.s=as(n[2]||""),this.g=as(n[3]||"",!0),Lr(this,n[4]),this.l=as(n[5]||"",!0),nc(this,n[6]||"",!0),this.o=as(n[7]||"")):(this.h=!!e,this.i=new Ds(null,this.h))}pn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ls(e,sc,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ls(e,sc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ls(n,n.charAt(0)=="/"?pw:dw,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ls(n,mw)),t.join("")};function Nt(t){return new pn(t)}function Or(t,e,n){t.j=n?as(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Lr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function nc(t,e,n){e instanceof Ds?(t.i=e,yw(t.i,t.h)):(n||(e=ls(e,gw)),t.i=new Ds(e,t.h))}function le(t,e,n){t.i.set(e,n)}function hi(t){return le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function as(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ls(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,fw),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fw(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var sc=/[#\/\?@]/g,dw=/[#\?:]/g,pw=/[#\?]/g,gw=/[#\?@]/g,mw=/#/g;function Ds(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Qt(t){t.g||(t.g=new Map,t.h=0,t.i&&hw(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}k=Ds.prototype;k.add=function(t,e){Qt(this),this.i=null,t=Xn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Eh(t,e){Qt(t),e=Xn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function bh(t,e){return Qt(t),e=Xn(t,e),t.g.has(e)}k.forEach=function(t,e){Qt(this),this.g.forEach(function(n,s){n.forEach(function(r){t.call(e,r,s,this)},this)},this)};k.oa=function(){Qt(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const r=t[s];for(let i=0;i<r.length;i++)n.push(e[s])}return n};k.W=function(t){Qt(this);let e=[];if(typeof t=="string")bh(this,t)&&(e=e.concat(this.g.get(Xn(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};k.set=function(t,e){return Qt(this),this.i=null,t=Xn(this,t),bh(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};k.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function Ih(t,e,n){Eh(t,e),0<n.length&&(t.i=null,t.g.set(Xn(t,e),pa(n)),t.h+=n.length)}k.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const i=encodeURIComponent(String(s)),o=this.W(s);for(s=0;s<o.length;s++){var r=i;o[s]!==""&&(r+="="+encodeURIComponent(String(o[s]))),t.push(r)}}return this.i=t.join("&")};function Xn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function yw(t,e){e&&!t.j&&(Qt(t),t.i=null,t.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(Eh(this,s),Ih(this,r,n))},t)),t.j=e}var vw=class{constructor(t,e){this.h=t,this.g=e}};function Th(t){this.l=t||ww,V.PerformanceNavigationTiming?(t=V.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(V.g&&V.g.Ga&&V.g.Ga()&&V.g.Ga().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ww=10;function _h(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Ch(t){return t.h?1:t.g?t.g.size:0}function Ro(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Sa(t,e){t.g?t.g.add(e):t.h=e}function Ah(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Th.prototype.cancel=function(){if(this.i=Sh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Sh(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return pa(t.i)}function Da(){}Da.prototype.stringify=function(t){return V.JSON.stringify(t,void 0)};Da.prototype.parse=function(t){return V.JSON.parse(t,void 0)};function Ew(){this.g=new Da}function bw(t,e,n){const s=n||"";try{vh(t,function(r,i){let o=r;Fs(r)&&(o=ba(r)),e.push(s+i+"="+encodeURIComponent(o))})}catch(r){throw e.push(s+"type="+encodeURIComponent("_badmap")),r}}function Iw(t,e){const n=new oi;if(V.Image){const s=new Image;s.onload=or(lr,n,s,"TestLoadImage: loaded",!0,e),s.onerror=or(lr,n,s,"TestLoadImage: error",!1,e),s.onabort=or(lr,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=or(lr,n,s,"TestLoadImage: timeout",!1,e),V.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function lr(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch{}}function Hs(t){this.l=t.$b||null,this.j=t.ib||!1}ke(Hs,_a);Hs.prototype.g=function(){return new fi(this.l,this.j)};Hs.prototype.i=function(t){return function(){return t}}({});function fi(t,e){_e.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Na,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ke(fi,_e);var Na=0;k=fi.prototype;k.open=function(t,e){if(this.readyState!=Na)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ns(this)};k.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||V).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))};k.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=Na};k.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof V.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Dh(this)}else t.text().then(this.Ua.bind(this),this.ga.bind(this))};function Dh(t){t.j.read().then(t.Sa.bind(t)).catch(t.ga.bind(t))}k.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?qs(this):Ns(this),this.readyState==3&&Dh(this)}};k.Ua=function(t){this.g&&(this.response=this.responseText=t,qs(this))};k.Ta=function(t){this.g&&(this.response=t,qs(this))};k.ga=function(){this.g&&qs(this)};function qs(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ns(t)}k.setRequestHeader=function(t,e){this.v.append(t,e)};k.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};k.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ns(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Tw=V.JSON.parse;function me(t){_e.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Nh,this.K=this.L=!1}ke(me,_e);var Nh="",_w=/^https?$/i,Cw=["POST","PUT"];k=me.prototype;k.da=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():No.g(),this.C=this.u?tc(this.u):tc(No),this.g.onreadystatechange=Re(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){rc(this,i);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const i of s.keys())n.set(i,s.get(i));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),r=V.FormData&&t instanceof V.FormData,!(0<=Ku(Cw,e))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mh(this),0<this.B&&((this.K=Aw(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Re(this.qa,this)):this.A=Ta(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){rc(this,i)}};function Aw(t){return Vn&&Hv()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}k.qa=function(){typeof da<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,De(this,"timeout"),this.abort(8))};function rc(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,kh(t),di(t)}function kh(t){t.D||(t.D=!0,De(t,"complete"),De(t,"error"))}k.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,De(this,"complete"),De(this,"abort"),di(this))};k.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),di(this,!0)),me.X.M.call(this)};k.Ha=function(){this.s||(this.F||this.v||this.l?xh(this):this.eb())};k.eb=function(){xh(this)};function xh(t){if(t.h&&typeof da<"u"&&(!t.C[1]||At(t)!=4||t.aa()!=2)){if(t.v&&At(t)==4)Ta(t.Ha,0,t);else if(De(t,"readystatechange"),At(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=a===0){var r=String(t.H).match(wh)[1]||null;if(!r&&V.self&&V.self.location){var i=V.self.location.protocol;r=i.substr(0,i.length-1)}s=!_w.test(r?r.toLowerCase():"")}n=s}if(n)De(t,"complete"),De(t,"success");else{t.m=6;try{var o=2<At(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",kh(t)}}finally{di(t)}}}}function di(t,e){if(t.g){Mh(t);const n=t.g,s=t.C[0]?kr:null;t.g=null,t.C=null,e||De(t,"ready");try{n.onreadystatechange=s}catch{}}}function Mh(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(V.clearTimeout(t.A),t.A=null)}function At(t){return t.g?t.g.readyState:0}k.aa=function(){try{return 2<At(this)?this.g.status:-1}catch{return-1}};k.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};k.Ra=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Tw(e)}};function ic(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Nh:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}k.Ea=function(){return this.m};k.Na=function(){return typeof this.j=="string"?this.j:String(this.j)};function Rh(t){let e="";return ma(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function ka(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Rh(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):le(t,e,n))}function is(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Oh(t){this.Ca=0,this.i=[],this.j=new oi,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=is("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=is("baseRetryDelayMs",5e3,t),this.ab=is("retryDelaySeedMs",1e4,t),this.Za=is("forwardChannelMaxRetries",2,t),this.ta=is("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Yb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Th(t&&t.concurrentRequestLimit),this.Fa=new Ew,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=t&&t.Wb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}k=Oh.prototype;k.ma=8;k.G=1;function xa(t){if(Lh(t),t.G==3){var e=t.U++,n=Nt(t.F);le(n,"SID",t.I),le(n,"RID",e),le(n,"TYPE","terminate"),Ks(t,n),e=new $s(t,t.j,e,void 0),e.K=2,e.v=hi(Nt(n)),n=!1,V.navigator&&V.navigator.sendBeacon&&(n=V.navigator.sendBeacon(e.v.toString(),"")),!n&&V.Image&&(new Image().src=e.v,n=!0),n||(e.g=Hh(e.l,null),e.g.da(e.v)),e.F=Date.now(),js(e)}$h(t)}function pi(t){t.g&&(Ra(t),t.g.cancel(),t.g=null)}function Lh(t){pi(t),t.u&&(V.clearTimeout(t.u),t.u=null),Pr(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&V.clearTimeout(t.m),t.m=null)}function gi(t){_h(t.h)||t.m||(t.m=!0,sh(t.Ja,t),t.C=0)}function Sw(t,e){return Ch(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Ya?0:t.Za)?!1:(t.m=Us(Re(t.Ja,t,e),Bh(t,t.C)),t.C++,!0)}k.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new $s(this,this.j,t,void 0);let i=this.s;if(this.S&&(i?(i=Qu(i),Yu(i,this.S)):i=this.S),this.o!==null||this.N||(r.H=i,i=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var s=this.i[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Ph(this,r,e),n=Nt(this.F),le(n,"RID",t),le(n,"CVER",22),this.D&&le(n,"X-HTTP-Session-Id",this.D),Ks(this,n),i&&(this.N?e="headers="+encodeURIComponent(String(Rh(i)))+"&"+e:this.o&&ka(n,this.o,i)),Sa(this.h,r),this.Xa&&le(n,"TYPE","init"),this.O?(le(n,"$req",e),le(n,"SID","null"),r.Z=!0,xo(r,n,null)):xo(r,n,e),this.G=2}}else this.G==3&&(t?oc(this,t):this.i.length==0||_h(this.h)||oc(this))};function oc(t,e){var n;e?n=e.m:n=t.U++;const s=Nt(t.F);le(s,"SID",t.I),le(s,"RID",n),le(s,"AID",t.T),Ks(t,s),t.o&&t.s&&ka(s,t.o,t.s),n=new $s(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=Ph(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Sa(t.h,n),xo(n,s,e)}function Ks(t,e){t.ia&&ma(t.ia,function(n,s){le(e,s,n)}),t.l&&vh({},function(n,s){le(e,s,n)})}function Ph(t,e,n){n=Math.min(t.i.length,n);var s=t.l?Re(t.l.Qa,t.l,t):null;e:{var r=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=r[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=r[l].h;const u=r[l].g;if(c-=i,0>c)i=Math.max(0,r[l].h-100),a=!1;else try{bw(u,o,"req"+c+"_")}catch{s&&s(u)}}if(a){s=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,s}function Fh(t){t.g||t.u||(t.Z=1,sh(t.Ia,t),t.A=0)}function Ma(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Us(Re(t.Ia,t),Bh(t,t.A)),t.A++,!0)}k.Ia=function(){if(this.u=null,Vh(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Us(Re(this.cb,this),t)}};k.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Be(10),pi(this),Vh(this))};function Ra(t){t.B!=null&&(V.clearTimeout(t.B),t.B=null)}function Vh(t){t.g=new $s(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=Nt(t.sa);le(e,"RID","rpc"),le(e,"SID",t.I),le(e,"CI",t.L?"0":"1"),le(e,"AID",t.T),le(e,"TYPE","xmlhttp"),Ks(t,e),t.o&&t.s&&ka(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=hi(Nt(e)),n.s=null,n.P=!0,ph(n,t)}k.bb=function(){this.v!=null&&(this.v=null,pi(this),Ma(this),Be(19))};function Pr(t){t.v!=null&&(V.clearTimeout(t.v),t.v=null)}function Uh(t,e){var n=null;if(t.g==e){Pr(t),Ra(t),t.g=null;var s=2}else if(Ro(t.h,e))n=e.D,Ah(t.h,e),s=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(s==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;s=ai(),De(s,new uh(s,n)),gi(t)}else Fh(t);else if(r=e.o,r==3||r==0&&0<t.pa||!(s==1&&Sw(t,e)||s==2&&Ma(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:un(t,5);break;case 4:un(t,10);break;case 3:un(t,6);break;default:un(t,2)}}}function Bh(t,e){let n=t.Wa+Math.floor(Math.random()*t.ab);return t.l||(n*=2),n*e}function un(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var s=Re(t.jb,t);n||(n=new pn("//www.google.com/images/cleardot.gif"),V.location&&V.location.protocol=="http"||Or(n,"https"),hi(n)),Iw(n.toString(),s)}else Be(2);t.G=0,t.l&&t.l.va(e),$h(t),Lh(t)}k.jb=function(t){t?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))};function $h(t){if(t.G=0,t.la=[],t.l){const e=Sh(t.h);(e.length!=0||t.i.length!=0)&&(Ql(t.la,e),Ql(t.la,t.i),t.h.i.length=0,pa(t.i),t.i.length=0),t.l.ua()}}function jh(t,e,n){var s=n instanceof pn?Nt(n):new pn(n,void 0);if(s.g!="")e&&(s.g=e+"."+s.g),Lr(s,s.m);else{var r=V.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var i=new pn(null,void 0);s&&Or(i,s),e&&(i.g=e),r&&Lr(i,r),n&&(i.l=n),s=i}return n=t.D,e=t.za,n&&e&&le(s,n,e),le(s,"VER",t.ma),Ks(t,s),s}function Hh(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new me(new Hs({ib:!0})):new me(t.ra),e.L=t.H,e}function qh(){}k=qh.prototype;k.xa=function(){};k.wa=function(){};k.va=function(){};k.ua=function(){};k.Qa=function(){};function Fr(){if(Vn&&!(10<=Number(qv)))throw Error("Environmental error: no available transport.")}Fr.prototype.g=function(t,e){return new Qe(t,e)};function Qe(t,e){_e.call(this),this.g=new Oh(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Xb)&&!xr(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xr(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Jn(this)}ke(Qe,_e);Qe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Be(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=jh(t,null,t.V),gi(t)};Qe.prototype.close=function(){xa(this.g)};Qe.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=ba(t),t=n);e.i.push(new vw(e.$a++,t)),e.G==3&&gi(e)};Qe.prototype.M=function(){this.g.l=null,delete this.j,xa(this.g),delete this.g,Qe.X.M.call(this)};function Kh(t){Ca.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ke(Kh,Ca);function zh(){Aa.call(this),this.status=1}ke(zh,Aa);function Jn(t){this.g=t}ke(Jn,qh);Jn.prototype.xa=function(){De(this.g,"a")};Jn.prototype.wa=function(t){De(this.g,new Kh(t))};Jn.prototype.va=function(t){De(this.g,new zh)};Jn.prototype.ua=function(){De(this.g,"b")};Fr.prototype.createWebChannel=Fr.prototype.g;Qe.prototype.send=Qe.prototype.u;Qe.prototype.open=Qe.prototype.m;Qe.prototype.close=Qe.prototype.close;li.NO_ERROR=0;li.TIMEOUT=8;li.HTTP_ERROR=6;hh.COMPLETE="complete";fh.EventType=Bs;Bs.OPEN="a";Bs.CLOSE="b";Bs.ERROR="c";Bs.MESSAGE="d";_e.prototype.listen=_e.prototype.N;me.prototype.listenOnce=me.prototype.O;me.prototype.getLastError=me.prototype.Na;me.prototype.getLastErrorCode=me.prototype.Ea;me.prototype.getStatus=me.prototype.aa;me.prototype.getResponseJson=me.prototype.Ra;me.prototype.getResponseText=me.prototype.fa;me.prototype.send=me.prototype.da;var Dw=function(){return new Fr},Nw=function(){return ai()},Ji=li,kw=hh,xw=bn,ac={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Mw=Hs,cr=fh,Rw=me;const lc="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}je.UNAUTHENTICATED=new je(null),je.GOOGLE_CREDENTIALS=new je("google-credentials-uid"),je.FIRST_PARTY=new je("first-party-uid"),je.MOCK_USER=new je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zn="9.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn=new Uu("@firebase/firestore");function cc(){return vn.logLevel}function M(t,...e){if(vn.logLevel<=Y.DEBUG){const n=e.map(Oa);vn.debug(`Firestore (${Zn}): ${t}`,...n)}}function kt(t,...e){if(vn.logLevel<=Y.ERROR){const n=e.map(Oa);vn.error(`Firestore (${Zn}): ${t}`,...n)}}function uc(t,...e){if(vn.logLevel<=Y.WARN){const n=e.map(Oa);vn.warn(`Firestore (${Zn}): ${t}`,...n)}}function Oa(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t="Unexpected state"){const e=`FIRESTORE (${Zn}) INTERNAL ASSERTION FAILED: `+t;throw kt(e),new Error(e)}function re(t,e){t||$()}function j(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(je.UNAUTHENTICATED))}shutdown(){}}class Pw{constructor(e){this.t=e,this.currentUser=je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new Bt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bt,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(re(typeof s.accessToken=="string"),new Ow(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string"),new je(e)}}class Fw{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r,this.type="FirstParty",this.user=je.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(re(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Vw{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r}getToken(){return Promise.resolve(new Fw(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bw{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const s=i=>{i.error!=null&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,M("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?r(i):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(re(typeof n.token=="string"),this.A=n.token,new Uw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=$w(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function X(t,e){return t<e?-1:t>e?1:0}function Un(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new ye(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new q(e)}static min(){return new q(new ye(0,0))}static max(){return new q(new ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,s){n===void 0?n=0:n>e.length&&$(),s===void 0?s=e.length-n:s>e.length-n&&$(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ks.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),o=n.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ce extends ks{construct(e,n,s){return new ce(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new F(I.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const jw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Me extends ks{construct(e,n,s){return new Me(e,n,s)}static isValidIdentifier(e){return jw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Me.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Me(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new F(I.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new F(I.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(I.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new F(I.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Me(n)}static emptyPath(){return new Me([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.path=e}static fromPath(e){return new L(ce.fromString(e))}static fromName(e){return new L(ce.fromString(e).popFirst(5))}static empty(){return new L(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new L(new ce(e.slice()))}}function Hw(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=q.fromTimestamp(s===1e9?new ye(n+1,0):new ye(n,s));return new Kt(r,L.empty(),e)}function qw(t){return new Kt(t.readTime,t.key,-1)}class Kt{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Kt(q.min(),L.empty(),-1)}static max(){return new Kt(q.max(),L.empty(),-1)}}function Kw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=L.comparator(t.documentKey,e.documentKey),n!==0?n:X(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ww{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(t){if(t.code!==I.FAILED_PRECONDITION||t.message!==zw)throw t;M("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new b((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof b?n:b.resolve(n)}catch(n){return b.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):b.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):b.reject(n)}static resolve(e){return new b((n,s)=>{n(e)})}static reject(e){return new b((n,s)=>{s(e)})}static waitFor(e){return new b((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=b.resolve(!1);for(const s of e)n=n.next(r=>r?b.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new b((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&s(o)},u=>r(u))}})}static doWhile(e,n){return new b((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function Ws(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>n.writeSequenceNumber(s))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function In(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Gh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */La.at=-1;class we{constructor(e,n){this.comparator=e,this.root=n||Ae.EMPTY}insert(e,n){return new we(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ae.BLACK,null,null))}remove(e){return new we(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ae.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ur(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ur(this.root,e,this.comparator,!1)}getReverseIterator(){return new ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ur(this.root,e,this.comparator,!0)}}class ur{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ae{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s!=null?s:Ae.RED,this.left=r!=null?r:Ae.EMPTY,this.right=i!=null?i:Ae.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Ae(e!=null?e:this.key,n!=null?n:this.value,s!=null?s:this.color,r!=null?r:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ae.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ae.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ae.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ae.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();const e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}}Ae.EMPTY=null,Ae.RED=!0,Ae.BLACK=!1;Ae.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(t,e,n,s,r){return this}insert(t,e,n){return new Ae(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fc(this.data.getIterator())}getIteratorFrom(e){return new fc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof ve)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ve(this.comparator);return n.data=e,n}}class fc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.fields=e,e.sort(Me.comparator)}static empty(){return new et([])}unionWith(e){let n=new ve(Me.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new et(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Un(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Ne(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Ne(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ne.EMPTY_BYTE_STRING=new Ne("");const Gw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zt(t){if(re(!!t),typeof t=="string"){let e=0;const n=Gw.exec(t);if(re(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ge(t.seconds),nanos:ge(t.nanos)}}function ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bn(t){return typeof t=="string"?Ne.fromBase64String(t):Ne.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Yh(t){const e=t.mapValue.fields.__previous_value__;return Qh(e)?Yh(e):e}function xs(t){const e=zt(t.mapValue.fields.__local_write_time__.timestampValue);return new ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n,s,r,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Ms{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ms("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ms&&e.projectId===this.projectId&&e.database===this.database}}function mi(t){return t==null}function Vr(t){return t===0&&1/t==-1/0}function Yw(t){return typeof t=="number"&&Number.isInteger(t)&&!Vr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function wn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qh(t)?4:Xw(t)?9007199254740991:10:$()}function It(t,e){if(t===e)return!0;const n=wn(t);if(n!==wn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xs(t).isEqual(xs(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=zt(s.timestampValue),o=zt(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Bn(s.bytesValue).isEqual(Bn(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return ge(s.geoPointValue.latitude)===ge(r.geoPointValue.latitude)&&ge(s.geoPointValue.longitude)===ge(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return ge(s.integerValue)===ge(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=ge(s.doubleValue),o=ge(r.doubleValue);return i===o?Vr(i)===Vr(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Un(t.arrayValue.values||[],e.arrayValue.values||[],It);case 10:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(hc(i)!==hc(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!It(i[a],o[a])))return!1;return!0}(t,e);default:return $()}}function Rs(t,e){return(t.values||[]).find(n=>It(n,e))!==void 0}function $n(t,e){if(t===e)return 0;const n=wn(t),s=wn(e);if(n!==s)return X(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return X(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=ge(r.integerValue||r.doubleValue),a=ge(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return dc(t.timestampValue,e.timestampValue);case 4:return dc(xs(t),xs(e));case 5:return X(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Bn(r),a=Bn(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=X(o[l],a[l]);if(c!==0)return c}return X(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=X(ge(r.latitude),ge(i.latitude));return o!==0?o:X(ge(r.longitude),ge(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,i){const o=r.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=$n(o[l],a[l]);if(c)return c}return X(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,i){if(r===hr.mapValue&&i===hr.mapValue)return 0;if(r===hr.mapValue)return 1;if(i===hr.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=i.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const f=X(a[u],c[u]);if(f!==0)return f;const p=$n(o[a[u]],l[c[u]]);if(p!==0)return p}return X(a.length,c.length)}(t.mapValue,e.mapValue);default:throw $()}}function dc(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return X(t,e);const n=zt(t),s=zt(e),r=X(n.seconds,s.seconds);return r!==0?r:X(n.nanos,s.nanos)}function Ln(t){return Oo(t)}function Oo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=zt(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Bn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,L.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(s){let r="[",i=!0;for(const o of s.values||[])i?i=!1:r+=",",r+=Oo(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${Oo(s.fields[a])}`;return i+"}"}(t.mapValue):$();var e,n}function Lo(t){return!!t&&"integerValue"in t}function Pa(t){return!!t&&"arrayValue"in t}function pc(t){return!!t&&"nullValue"in t}function gc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yr(t){return!!t&&"mapValue"in t}function fs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return In(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=fs(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Xw(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.value=e}static empty(){return new He({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!yr(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fs(n)}setAll(e){let n=Me.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=fs(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());yr(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return It(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];yr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){In(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new He(fs(this.value))}}function Xh(t){const e=[];return In(t.fields,(n,s)=>{const r=new Me([n]);if(yr(s)){const i=Xh(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new et(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n,s,r,i,o){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Se(e,0,q.min(),q.min(),He.empty(),0)}static newFoundDocument(e,n,s){return new Se(e,1,n,q.min(),s,0)}static newNoDocument(e,n){return new Se(e,2,n,q.min(),He.empty(),0)}static newUnknownDocument(e,n){return new Se(e,3,n,q.min(),He.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=He.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=He.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Se&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Se(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ht=null}}function mc(t,e=null,n=[],s=[],r=null,i=null,o=null){return new Jw(t,e,n,s,r,i,o)}function Fa(t){const e=j(t);if(e.ht===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>{return(r=s).field.canonicalString()+r.op.toString()+Ln(r.value);var r}).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),mi(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ln(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ln(s)).join(",")),e.ht=n}return e.ht}function Zw(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(s=n).field.canonicalString()} ${s.op} ${Ln(s.value)}`;var s}).join(", ")}]`),mi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Ln(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Ln(n)).join(",")),`Target(${e})`}function Va(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!a0(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],s=e.filters[r],n.op!==s.op||!n.field.isEqual(s.field)||!It(n.value,s.value))return!1;var n,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vc(t.startAt,e.startAt)&&vc(t.endAt,e.endAt)}function Po(t){return L.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class qe extends class{}{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.lt(e,n,s):new e0(e,n,s):n==="array-contains"?new s0(e,s):n==="in"?new r0(e,s):n==="not-in"?new i0(e,s):n==="array-contains-any"?new o0(e,s):new qe(e,n,s)}static lt(e,n,s){return n==="in"?new t0(e,s):new n0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.ft($n(n,this.value)):n!==null&&wn(this.value)===wn(n)&&this.ft($n(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class e0 extends qe{constructor(e,n,s){super(e,n,s),this.key=L.fromName(s.referenceValue)}matches(e){const n=L.comparator(e.key,this.key);return this.ft(n)}}class t0 extends qe{constructor(e,n){super(e,"in",n),this.keys=Jh("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class n0 extends qe{constructor(e,n){super(e,"not-in",n),this.keys=Jh("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Jh(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>L.fromName(s.referenceValue))}class s0 extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pa(n)&&Rs(n.arrayValue,this.value)}}class r0 extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rs(this.value.arrayValue,n)}}class i0 extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Rs(this.value.arrayValue,n)}}class o0 extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Rs(this.value.arrayValue,s))}}class Ur{constructor(e,n){this.position=e,this.inclusive=n}}class ds{constructor(e,n="asc"){this.field=e,this.dir=n}}function a0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function yc(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=L.comparator(L.fromName(o.referenceValue),n.key):s=$n(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function vc(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!It(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null,this.startAt,this.endAt}}function l0(t,e,n,s,r,i,o,a){return new yi(t,e,n,s,r,i,o,a)}function Zh(t){return new yi(t)}function wc(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function c0(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function u0(t){for(const e of t.filters)if(e.dt())return e.field;return null}function h0(t){return t.collectionGroup!==null}function Os(t){const e=j(t);if(e._t===null){e._t=[];const n=u0(e),s=c0(e);if(n!==null&&s===null)n.isKeyField()||e._t.push(new ds(n)),e._t.push(new ds(Me.keyField(),"asc"));else{let r=!1;for(const i of e.explicitOrderBy)e._t.push(i),i.field.isKeyField()&&(r=!0);if(!r){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new ds(Me.keyField(),i))}}}return e._t}function xt(t){const e=j(t);if(!e.wt)if(e.limitType==="F")e.wt=mc(e.path,e.collectionGroup,Os(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Os(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new ds(i.field,o))}const s=e.endAt?new Ur(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ur(e.startAt.position,e.startAt.inclusive):null;e.wt=mc(e.path,e.collectionGroup,n,e.filters,e.limit,s,r)}return e.wt}function Fo(t,e,n){return new yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vi(t,e){return Va(xt(t),xt(e))&&t.limitType===e.limitType}function ef(t){return`${Fa(xt(t))}|lt:${t.limitType}`}function Vo(t){return`Query(target=${Zw(xt(t))}; limitType=${t.limitType})`}function Ua(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):L.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=yc(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,Os(n),s)||n.endAt&&!function(r,i,o){const a=yc(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,Os(n),s))}(t,e)}function f0(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tf(t){return(e,n)=>{let s=!1;for(const r of Os(t)){const i=d0(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function d0(t,e,n){const s=t.field.isKeyField()?L.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?$n(a,l):$()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return $()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vr(e)?"-0":e}}function sf(t){return{integerValue:""+t}}function p0(t,e){return Yw(e)?sf(e):nf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(){this._=void 0}}function g0(t,e,n){return t instanceof Br?function(s,r){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&(i.fields.__previous_value__=r),{mapValue:i}}(n,e):t instanceof jn?of(t,e):t instanceof Ls?af(t,e):function(s,r){const i=rf(s,r),o=Ec(i)+Ec(s.yt);return Lo(i)&&Lo(s.yt)?sf(o):nf(s.It,o)}(t,e)}function m0(t,e,n){return t instanceof jn?of(t,e):t instanceof Ls?af(t,e):n}function rf(t,e){return t instanceof $r?Lo(n=e)||function(s){return!!s&&"doubleValue"in s}(n)?e:{integerValue:0}:null;var n}class Br extends wi{}class jn extends wi{constructor(e){super(),this.elements=e}}function of(t,e){const n=lf(e);for(const s of t.elements)n.some(r=>It(r,s))||n.push(s);return{arrayValue:{values:n}}}class Ls extends wi{constructor(e){super(),this.elements=e}}function af(t,e){let n=lf(e);for(const s of t.elements)n=n.filter(r=>!It(r,s));return{arrayValue:{values:n}}}class $r extends wi{constructor(e,n){super(),this.It=e,this.yt=n}}function Ec(t){return ge(t.integerValue||t.doubleValue)}function lf(t){return Pa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n){this.field=e,this.transform=n}}function v0(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof jn&&s instanceof jn||n instanceof Ls&&s instanceof Ls?Un(n.elements,s.elements,It):n instanceof $r&&s instanceof $r?It(n.yt,s.yt):n instanceof Br&&s instanceof Br}(t.transform,e.transform)}class w0{constructor(e,n){this.version=e,this.transformResults=n}}class Et{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Et}static exists(e){return new Et(void 0,e)}static updateTime(e){return new Et(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vr(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ei{}function cf(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hf(t.key,Et.none()):new Gs(t.key,t.data,Et.none());{const n=t.data,s=He.empty();let r=new ve(Me.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Yt(t.key,s,new et(r.toArray()),Et.none())}}function E0(t,e,n){t instanceof Gs?function(s,r,i){const o=s.value.clone(),a=Ic(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Yt?function(s,r,i){if(!vr(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=Ic(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(uf(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function ps(t,e,n,s){return t instanceof Gs?function(r,i,o,a){if(!vr(r.precondition,i))return o;const l=r.value.clone(),c=Tc(r.fieldTransforms,a,i);return l.setAll(c),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof Yt?function(r,i,o,a){if(!vr(r.precondition,i))return o;const l=Tc(r.fieldTransforms,a,i),c=i.data;return c.setAll(uf(r)),c.setAll(l),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(t,e,n,s):function(r,i,o){return vr(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function b0(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=rf(s.transform,r||null);i!=null&&(n===null&&(n=He.empty()),n.set(s.field,i))}return n||null}function bc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Un(n,s,(r,i)=>v0(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gs extends Ei{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Yt extends Ei{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function uf(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Ic(t,e,n){const s=new Map;re(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,m0(o,a,n[r]))}return s}function Tc(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,g0(i,o,e))}return s}class hf extends Ei{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class I0 extends Ei{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe,G;function _0(t){switch(t){default:return $();case I.CANCELLED:case I.UNKNOWN:case I.DEADLINE_EXCEEDED:case I.RESOURCE_EXHAUSTED:case I.INTERNAL:case I.UNAVAILABLE:case I.UNAUTHENTICATED:return!1;case I.INVALID_ARGUMENT:case I.NOT_FOUND:case I.ALREADY_EXISTS:case I.PERMISSION_DENIED:case I.FAILED_PRECONDITION:case I.ABORTED:case I.OUT_OF_RANGE:case I.UNIMPLEMENTED:case I.DATA_LOSS:return!0}}function ff(t){if(t===void 0)return kt("GRPC error has no .code"),I.UNKNOWN;switch(t){case pe.OK:return I.OK;case pe.CANCELLED:return I.CANCELLED;case pe.UNKNOWN:return I.UNKNOWN;case pe.DEADLINE_EXCEEDED:return I.DEADLINE_EXCEEDED;case pe.RESOURCE_EXHAUSTED:return I.RESOURCE_EXHAUSTED;case pe.INTERNAL:return I.INTERNAL;case pe.UNAVAILABLE:return I.UNAVAILABLE;case pe.UNAUTHENTICATED:return I.UNAUTHENTICATED;case pe.INVALID_ARGUMENT:return I.INVALID_ARGUMENT;case pe.NOT_FOUND:return I.NOT_FOUND;case pe.ALREADY_EXISTS:return I.ALREADY_EXISTS;case pe.PERMISSION_DENIED:return I.PERMISSION_DENIED;case pe.FAILED_PRECONDITION:return I.FAILED_PRECONDITION;case pe.ABORTED:return I.ABORTED;case pe.OUT_OF_RANGE:return I.OUT_OF_RANGE;case pe.UNIMPLEMENTED:return I.UNIMPLEMENTED;case pe.DATA_LOSS:return I.DATA_LOSS;default:return $()}}(G=pe||(pe={}))[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){In(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return Gh(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new we(L.comparator);function Mt(){return C0}const df=new we(L.comparator);function cs(...t){let e=df;for(const n of t)e=e.insert(n.key,n);return e}function pf(t){let e=df;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function hn(){return gs()}function gf(){return gs()}function gs(){return new es(t=>t.toString(),(t,e)=>t.isEqual(e))}const A0=new we(L.comparator),S0=new ve(L.comparator);function W(...t){let e=S0;for(const n of t)e=e.add(n);return e}const D0=new ve(X);function mf(){return D0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n){const s=new Map;return s.set(e,Qs.createSynthesizedTargetChangeForCurrentChange(e,n)),new bi(q.min(),s,mf(),Mt(),W())}}class Qs{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Qs(Ne.EMPTY_BYTE_STRING,n,W(),W(),W())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,s,r){this.Tt=e,this.removedTargetIds=n,this.key=s,this.Et=r}}class yf{constructor(e,n){this.targetId=e,this.At=n}}class vf{constructor(e,n,s=Ne.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class _c{constructor(){this.Rt=0,this.bt=Ac(),this.Pt=Ne.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=W(),n=W(),s=W();return this.bt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:$()}}),new Qs(this.Pt,this.vt,e,n,s)}Nt(){this.Vt=!1,this.bt=Ac()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class N0{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Mt(),this.qt=Cc(),this.Kt=new ve(X)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const s=this.zt(n);switch(e.state){case 0:this.Ht(n)&&s.Ct(e.resumeToken);break;case 1:s.Ft(),s.St||s.Nt(),s.Ct(e.resumeToken);break;case 2:s.Ft(),s.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(s.$t(),s.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),s.Ct(e.resumeToken));break;default:$()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((s,r)=>{this.Ht(r)&&n(r)})}Yt(e){const n=e.targetId,s=e.At.count,r=this.Xt(n);if(r){const i=r.target;if(Po(i))if(s===0){const o=new L(i.path);this.jt(n,o,Se.newNoDocument(o,q.min()))}else re(s===1);else this.Zt(n)!==s&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((i,o)=>{const a=this.Xt(o);if(a){if(i.current&&Po(a.target)){const l=new L(a.target.path);this.Ut.get(l)!==null||this.ee(o,l)||this.jt(o,l,Se.newNoDocument(l,e))}i.Dt&&(n.set(o,i.xt()),i.Nt())}});let s=W();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(s=s.add(i))}),this.Ut.forEach((i,o)=>o.setReadTime(e));const r=new bi(e,n,this.Kt,this.Ut,s);return this.Ut=Mt(),this.qt=Cc(),this.Kt=new ve(X),r}Qt(e,n){if(!this.Ht(e))return;const s=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,s),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,s){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,n)?r.kt(n,1):r.Mt(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),s&&(this.Ut=this.Ut.insert(n,s))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let n=this.Lt.get(e);return n||(n=new _c,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new ve(X),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=this.Xt(e)!==null;return n||M("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new _c),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function Cc(){return new we(L.comparator)}function Ac(){return new we(L.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),x0=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class M0{constructor(e,n){this.databaseId=e,this.gt=n}}function jr(t,e){return t.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wf(t,e){return t.gt?e.toBase64():e.toUint8Array()}function R0(t,e){return jr(t,e.toTimestamp())}function St(t){return re(!!t),q.fromTimestamp(function(e){const n=zt(e);return new ye(n.seconds,n.nanos)}(t))}function Ba(t,e){return function(n){return new ce(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Ef(t){const e=ce.fromString(t);return re(Tf(e)),e}function Uo(t,e){return Ba(t.databaseId,e.path)}function Zi(t,e){const n=Ef(e);if(n.get(1)!==t.databaseId.projectId)throw new F(I.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(I.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new L(bf(n))}function Bo(t,e){return Ba(t.databaseId,e)}function O0(t){const e=Ef(t);return e.length===4?ce.emptyPath():bf(e)}function $o(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bf(t){return re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Sc(t,e,n){return{name:Uo(t,e),fields:n.value.mapValue.fields}}function L0(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,c){return l.gt?(re(c===void 0||typeof c=="string"),Ne.fromBase64String(c||"")):(re(c===void 0||c instanceof Uint8Array),Ne.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?I.UNKNOWN:ff(l.code);return new F(c,l.message||"")}(o);n=new vf(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Zi(t,s.document.name),i=St(s.document.updateTime),o=new He({mapValue:{fields:s.document.fields}}),a=Se.newFoundDocument(r,i,o),l=s.targetIds||[],c=s.removedTargetIds||[];n=new wr(l,c,a.key,a)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Zi(t,s.document),i=s.readTime?St(s.readTime):q.min(),o=Se.newNoDocument(r,i),a=s.removedTargetIds||[];n=new wr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Zi(t,s.document),i=s.removedTargetIds||[];n=new wr([],i,r,null)}else{if(!("filter"in e))return $();{e.filter;const s=e.filter;s.targetId;const r=s.count||0,i=new T0(r),o=s.targetId;n=new yf(o,i)}}return n}function P0(t,e){let n;if(e instanceof Gs)n={update:Sc(t,e.key,e.value)};else if(e instanceof hf)n={delete:Uo(t,e.key)};else if(e instanceof Yt)n={update:Sc(t,e.key,e.data),updateMask:z0(e.fieldMask)};else{if(!(e instanceof I0))return $();n={verify:Uo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof Br)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof jn)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ls)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof $r)return{fieldPath:i.field.canonicalString(),increment:o.yt};throw $()}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:R0(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:$()}(t,e.precondition)),n}function F0(t,e){return t&&t.length>0?(re(e!==void 0),t.map(n=>function(s,r){let i=s.updateTime?St(s.updateTime):St(r);return i.isEqual(q.min())&&(i=St(r)),new w0(i,s.transformResults||[])}(n,e))):[]}function V0(t,e){return{documents:[Bo(t,e.path)]}}function U0(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=Bo(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Bo(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(l){if(l.length===0)return;const c=l.map(u=>function(f){if(f.op==="=="){if(gc(f.value))return{unaryFilter:{field:An(f.field),op:"IS_NAN"}};if(pc(f.value))return{unaryFilter:{field:An(f.field),op:"IS_NULL"}}}else if(f.op==="!="){if(gc(f.value))return{unaryFilter:{field:An(f.field),op:"IS_NOT_NAN"}};if(pc(f.value))return{unaryFilter:{field:An(f.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:An(f.field),op:H0(f.op),value:f.value}}}(u));return c.length===1?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);r&&(n.structuredQuery.where=r);const i=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:An(u.field),direction:j0(u.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(l,c){return l.gt||mi(c)?c:{value:c}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function B0(t){let e=O0(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){re(s===1);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=If(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(f){return new ds(Dn(f.field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f.direction))}(u)));let a=null;n.limit&&(a=function(u){let f;return f=typeof u=="object"?u.value:u,mi(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(u){const f=!!u.before,p=u.values||[];return new Ur(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const f=!u.before,p=u.values||[];return new Ur(p,f)}(n.endAt)),l0(e,r,o,i,a,"F",l,c)}function $0(t,e){const n=function(s,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return $()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function If(t){return t?t.unaryFilter!==void 0?[K0(t)]:t.fieldFilter!==void 0?[q0(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>If(e)).reduce((e,n)=>e.concat(n)):$():[]}function j0(t){return k0[t]}function H0(t){return x0[t]}function An(t){return{fieldPath:t.canonicalString()}}function Dn(t){return Me.fromServerFormat(t.fieldPath)}function q0(t){return qe.create(Dn(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(t.fieldFilter.op),t.fieldFilter.value)}function K0(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Dn(t.unaryFilter.field);return qe.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Dn(t.unaryFilter.field);return qe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Dn(t.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Dn(t.unaryFilter.field);return qe.create(r,"!=",{nullValue:"NULL_VALUE"});default:return $()}}function z0(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Tf(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&E0(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ps(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ps(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=gf();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=cf(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(q.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),W())}isEqual(e){return this.batchId===e.batchId&&Un(this.mutations,e.mutations,(n,s)=>bc(n,s))&&Un(this.baseMutations,e.baseMutations,(n,s)=>bc(n,s))}}class $a{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){re(e.mutations.length===s.length);let r=A0;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new $a(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n,s,r,i=q.min(),o=q.min(),a=Ne.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new gn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.re=e}}function Y0(t){const e=B0({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fo(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.Ye=new J0}addToCollectionParentIndex(e,n){return this.Ye.add(n),b.resolve()}getCollectionParents(e,n){return b.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return b.resolve()}deleteFieldIndex(e,n){return b.resolve()}getDocumentsMatchingTarget(e,n){return b.resolve(null)}getIndexType(e,n){return b.resolve(0)}getFieldIndexes(e,n){return b.resolve([])}getNextCollectionGroupToUpdate(e){return b.resolve(null)}getMinOffset(e,n){return b.resolve(Kt.min())}getMinOffsetFromCollectionGroup(e,n){return b.resolve(Kt.min())}updateCollectionGroup(e,n,s){return b.resolve()}updateIndexEntries(e,n){return b.resolve()}}class J0{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ve(ce.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ve(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Hn(0)}static vn(){return new Hn(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.changes=new es(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Se.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?b.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.getBaseDocument(e,n,s))).next(r=>(s!==null&&ps(s.mutation,r,et.empty(),ye.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,W()).next(()=>s))}getLocalViewOfDocuments(e,n,s=W()){const r=hn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=cs();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=hn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,W()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=Mt();const o=gs(),a=gs();return n.forEach((l,c)=>{const u=s.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Yt)?i=i.insert(c.key,c):u!==void 0&&(o.set(c.key,u.mutation.getFieldMask()),ps(u.mutation,c,u.mutation.getFieldMask(),ye.now()))}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new eE(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const s=gs();let r=new we((o,a)=>o-a),i=W();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=s.get(l)||et.empty();u=a.applyToLocalView(c,u),s.set(l,u);const f=(r.get(a.batchId)||W()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=gf();u.forEach(p=>{if(!i.has(p)){const y=cf(n.get(p),s.get(p));y!==null&&f.set(p,y),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return b.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s){return function(r){return L.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):h0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):b.resolve(hn());let a=-1,l=i;return o.next(c=>b.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?b.resolve():this.getBaseDocument(e,u,f).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,W())).next(u=>({batchId:a,changes:pf(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new L(n)).next(s=>{let r=cs();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s){const r=n.collectionGroup;let i=cs();return this.indexManager.getCollectionParents(e,r).next(o=>b.forEach(o,a=>{const l=function(c,u){return new yi(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,l,s).next(c=>{c.forEach((u,f)=>{i=i.insert(u,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,s){let r;return this.remoteDocumentCache.getAllFromCollection(e,n.path,s).next(i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId))).next(i=>{i.forEach((a,l)=>{const c=l.getKey();r.get(c)===null&&(r=r.insert(c,Se.newInvalidDocument(c)))});let o=cs();return r.forEach((a,l)=>{const c=i.get(a);c!==void 0&&ps(c.mutation,l,et.empty(),ye.now()),Ua(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,s){return s===null||s.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):b.resolve(Se.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return b.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var s;return this.Zn.set(n.id,{id:(s=n).id,version:s.version,createTime:St(s.createTime)}),b.resolve()}getNamedQuery(e,n){return b.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(s){return{name:s.name,query:Y0(s.bundledQuery),readTime:St(s.readTime)}}(n)),b.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(){this.overlays=new we(L.comparator),this.es=new Map}getOverlay(e,n){return b.resolve(this.overlays.get(n))}getOverlays(e,n){const s=hn();return b.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.ue(e,n,i)}),b.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.es.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(s)),b.resolve()}getOverlaysForCollection(e,n,s){const r=hn(),i=n.length+1,o=new L(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return b.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new we((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let u=i.get(c.largestBatchId);u===null&&(u=hn(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=hn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return b.resolve(a)}ue(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.es.get(r.largestBatchId).delete(s.key);this.es.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new G0(n,s));let i=this.es.get(n);i===void 0&&(i=W(),this.es.set(n,i)),this.es.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.ns=new ve(be.ss),this.rs=new ve(be.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const s=new be(e,n);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.cs(new be(e,n))}hs(e,n){e.forEach(s=>this.removeReference(s,n))}ls(e){const n=new L(new ce([])),s=new be(n,e),r=new be(n,e+1),i=[];return this.rs.forEachInRange([s,r],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new L(new ce([])),s=new be(n,e),r=new be(n,e+1);let i=W();return this.rs.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new be(e,0),s=this.ns.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class be{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return L.comparator(e.key,n.key)||X(e._s,n._s)}static os(e,n){return X(e._s,n._s)||L.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new ve(be.ss)}checkEmpty(e){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new W0(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.gs=this.gs.add(new be(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return b.resolve(o)}lookupMutationBatch(e,n){return b.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ps(s),i=r<0?0:r;return b.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new be(n,0),r=new be(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([s,r],o=>{const a=this.ys(o._s);i.push(a)}),b.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ve(X);return n.forEach(r=>{const i=new be(r,0),o=new be(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{s=s.add(a._s)})}),b.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;L.isDocumentKey(i)||(i=i.child(""));const o=new be(new L(i),0);let a=new ve(X);return this.gs.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(l._s)),!0)},o),b.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(s=>{const r=this.ys(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){re(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.gs;return b.forEach(n.mutations,r=>{const i=new be(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,n){const s=new be(n,0),r=this.gs.firstAfterOrEqual(s);return b.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,b.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.Es=e,this.docs=new we(L.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.Es(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return b.resolve(s?s.document.mutableCopy():Se.newInvalidDocument(n))}getEntries(e,n){let s=Mt();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Se.newInvalidDocument(r))}),b.resolve(s)}getAllFromCollection(e,n,s){let r=Mt();const i=new L(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||Kw(qw(l),s)<=0||(r=r.insert(l.key,l.mutableCopy()))}return b.resolve(r)}getAllFromCollectionGroup(e,n,s,r){$()}As(e,n){return b.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new oE(this)}getSize(e){return b.resolve(this.size)}}class oE extends Z0{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(s)}),b.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this.persistence=e,this.Rs=new es(n=>Fa(n),Va),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.bs=0,this.Ps=new ja,this.targetCount=0,this.vs=Hn.Pn()}forEachTarget(e,n){return this.Rs.forEach((s,r)=>n(r)),b.resolve()}getLastRemoteSnapshotVersion(e){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return b.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.bs&&(this.bs=n),b.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new Hn(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,b.resolve()}updateTargetData(e,n){return this.Dn(n),b.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),b.waitFor(i).next(()=>r)}getTargetCount(e){return b.resolve(this.targetCount)}getTargetData(e,n){const s=this.Rs.get(n)||null;return b.resolve(s)}addMatchingKeys(e,n,s){return this.Ps.us(n,s),b.resolve()}removeMatchingKeys(e,n,s){this.Ps.hs(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),b.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),b.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ps.ds(n);return b.resolve(s)}containsKey(e,n){return b.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new La(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new aE(this),this.indexManager=new X0,this.remoteDocumentCache=function(s){return new iE(s)}(s=>this.referenceDelegate.xs(s)),this.It=new Q0(n),this.Ns=new nE(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Vs[e.toKey()];return s||(s=new rE(n,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,s){M("MemoryPersistence","Starting transaction:",e);const r=new cE(this.Ss.next());return this.referenceDelegate.ks(),s(r).next(i=>this.referenceDelegate.Ms(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Os(e,n){return b.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,n)))}}class cE extends Ww{constructor(e){super(),this.currentSequenceNumber=e}}class Ha{constructor(e){this.persistence=e,this.Fs=new ja,this.$s=null}static Bs(e){return new Ha(e)}get Ls(){if(this.$s)return this.$s;throw $()}addReference(e,n,s){return this.Fs.addReference(s,n),this.Ls.delete(s.toString()),b.resolve()}removeReference(e,n,s){return this.Fs.removeReference(s,n),this.Ls.add(s.toString()),b.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),b.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(r=>this.Ls.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.Ls.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}ks(){this.$s=new Set}Ms(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.Ls,s=>{const r=L.fromPath(s);return this.Us(e,r).next(i=>{i||n.removeEntry(r,q.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(s=>{s?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return b.or([()=>b.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Os(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Si=s,this.Di=r}static Ci(e,n){let s=W(),r=W();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new qa(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,s,r){return this.ki(e,n).next(i=>i||this.Mi(e,n,r,s)).next(i=>i||this.Oi(e,n))}ki(e,n){if(wc(n))return b.resolve(null);let s=xt(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Fo(n,null,"F"),s=xt(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=W(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const c=this.Fi(n,a);return this.$i(n,c,o,l.readTime)?this.ki(e,Fo(n,null,"F")):this.Bi(e,c,n,l)}))})))}Mi(e,n,s,r){return wc(n)||r.isEqual(q.min())?this.Oi(e,n):this.Ni.getDocuments(e,s).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,s,r)?this.Oi(e,n):(cc()<=Y.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Vo(n)),this.Bi(e,o,n,Hw(r,-1)))})}Fi(e,n){let s=new ve(tf(e));return n.forEach((r,i)=>{Ua(e,i)&&(s=s.add(i))}),s}$i(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Oi(e,n){return cc()<=Y.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",Vo(n)),this.Ni.getDocumentsMatchingQuery(e,n,Kt.min())}Bi(e,n,s,r){return this.Ni.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n,s,r){this.persistence=e,this.Li=n,this.It=r,this.Ui=new we(X),this.qi=new es(i=>Fa(i),Va),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tE(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function fE(t,e,n,s){return new hE(t,e,n,s)}async function _f(t,e){const n=j(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=W();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(s,l).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}function dE(t,e){const n=j(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,f=u.keys();let p=b.resolve();return f.forEach(y=>{p=p.next(()=>c.getEntry(a,y)).next(_=>{const S=l.docVersions.get(y);re(S!==null),_.version.compareTo(S)<0&&(u.applyToRemoteDocument(_,l),_.isValidDocument()&&(_.setReadTime(l.commitVersion),c.addEntry(_)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=W();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function Cf(t){const e=j(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function pE(t,e){const n=j(t),s=e.snapshotVersion;let r=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});r=n.Ui;const a=[];e.targetChanges.forEach((u,f)=>{const p=r.get(f);if(!p)return;a.push(n.Cs.removeMatchingKeys(i,u.removedDocuments,f).next(()=>n.Cs.addMatchingKeys(i,u.addedDocuments,f)));let y=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(f)?y=y.withResumeToken(Ne.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,s)),r=r.insert(f,y),function(_,S,x){return _.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,y,u)&&a.push(n.Cs.updateTargetData(i,y))});let l=Mt(),c=W();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(gE(i,o,e.documentUpdates).next(u=>{l=u.Wi,c=u.zi})),!s.isEqual(q.min())){const u=n.Cs.getLastRemoteSnapshotVersion(i).next(f=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(u)}return b.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ui=r,i))}function gE(t,e,n){let s=W(),r=W();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Mt();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(q.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):M("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Wi:o,zi:r}})}function mE(t,e){const n=j(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function yE(t,e){const n=j(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Cs.getTargetData(s,e).next(i=>i?(r=i,b.resolve(r)):n.Cs.allocateTargetId(s).next(o=>(r=new gn(e,o,0,s.currentSequenceNumber),n.Cs.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ui.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(s.targetId,s),n.qi.set(e,s.targetId)),s})}async function jo(t,e,n){const s=j(t),r=s.Ui.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ws(o))throw o;M("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ui=s.Ui.remove(e),s.qi.delete(r.target)}function Dc(t,e,n){const s=j(t);let r=q.min(),i=W();return s.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=j(a),f=u.qi.get(c);return f!==void 0?b.resolve(u.Ui.get(f)):u.Cs.getTargetData(l,c)}(s,o,xt(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Li.getDocumentsMatchingQuery(o,e,n?r:q.min(),n?i:W())).next(a=>(vE(s,f0(e),a),{documents:a,Hi:i})))}function vE(t,e,n){let s=q.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ki.set(e,s)}class Nc{constructor(){this.activeTargetIds=mf()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wE{constructor(){this.Lr=new Nc,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,s){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Nc,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,n,s,r,i){const o=this.ao(e,n);M("RestConnection","Sending: ",o,s);const a={};return this.ho(a,r,i),this.lo(e,o,a,s).then(l=>(M("RestConnection","Received: ",l),l),l=>{throw uc("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",s),l})}fo(e,n,s,r,i,o){return this.co(e,n,s,r,i)}ho(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}ao(e,n){const s=bE[e];return`${this.oo}/v1/${n}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,n,s,r){return new Promise((i,o)=>{const a=new Rw;a.listenOnce(kw.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ji.NO_ERROR:const c=a.getResponseJson();M("Connection","XHR received:",JSON.stringify(c)),i(c);break;case Ji.TIMEOUT:M("Connection",'RPC "'+e+'" timed out'),o(new F(I.DEADLINE_EXCEEDED,"Request time out"));break;case Ji.HTTP_ERROR:const u=a.getStatus();if(M("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const f=a.getResponseJson().error;if(f&&f.status&&f.message){const p=function(y){const _=y.toLowerCase().replace(/_/g,"-");return Object.values(I).indexOf(_)>=0?_:I.UNKNOWN}(f.status);o(new F(p,f.message))}else o(new F(I.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new F(I.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{M("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(r);a.send(n,"POST",l,s,15)})}_o(e,n,s){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Dw(),o=Nw(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Mw({})),this.ho(a.initMessageHeaders,n,s),a.encodeInitMessageHeaders=!0;const l=r.join("");M("Connection","Creating WebChannel: "+l,a);const c=i.createWebChannel(l,a);let u=!1,f=!1;const p=new IE({Hr:_=>{f?M("Connection","Not sending because WebChannel is closed:",_):(u||(M("Connection","Opening WebChannel transport."),c.open(),u=!0),M("Connection","WebChannel sending:",_),c.send(_))},Jr:()=>c.close()}),y=(_,S,x)=>{_.listen(S,P=>{try{x(P)}catch(ie){setTimeout(()=>{throw ie},0)}})};return y(c,cr.EventType.OPEN,()=>{f||M("Connection","WebChannel transport opened.")}),y(c,cr.EventType.CLOSE,()=>{f||(f=!0,M("Connection","WebChannel transport closed"),p.io())}),y(c,cr.EventType.ERROR,_=>{f||(f=!0,uc("Connection","WebChannel transport errored:",_),p.io(new F(I.UNAVAILABLE,"The operation could not be completed")))}),y(c,cr.EventType.MESSAGE,_=>{var S;if(!f){const x=_.data[0];re(!!x);const P=x,ie=P.error||((S=P[0])===null||S===void 0?void 0:S.error);if(ie){M("Connection","WebChannel received error:",ie);const oe=ie.status;let te=function(Ot){const tt=pe[Ot];if(tt!==void 0)return ff(tt)}(oe),Ce=ie.message;te===void 0&&(te=I.INTERNAL,Ce="Unknown error status: "+oe+" with message "+ie.message),f=!0,p.io(new F(te,Ce)),c.close()}else M("Connection","WebChannel received:",x),p.ro(x)}}),y(o,xw.STAT_EVENT,_=>{_.stat===ac.PROXY?M("Connection","Detected buffering proxy"):_.stat===ac.NOPROXY&&M("Connection","Detected no buffering proxy")}),setTimeout(()=>{p.so()},0),p}}function eo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){return new M0(t,!0)}class Af{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Hs=e,this.timerId=n,this.wo=s,this.mo=r,this.yo=i,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const n=Math.floor(this.po+this.Ro()),s=Math.max(0,Date.now()-this.To),r=Math.max(0,n-s);r>0&&M("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.po} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){this.Io!==null&&(this.Io.skipDelay(),this.Io=null)}cancel(){this.Io!==null&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n,s,r,i,o,a,l){this.Hs=e,this.Po=s,this.vo=r,this.Vo=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Af(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Mo()}async stop(){this.No()&&await this.close(0)}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===I.RESOURCE_EXHAUSTED?(kt(n.toString()),kt("Using maximum backoff delay to prevent overloading the backend."),this.xo.Eo()):n&&n.code===I.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.So===n&&this.Go(s,r)},s=>{e(()=>{const r=new F(I.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(r)})})}Go(e,n){const s=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{s(()=>this.Qo(r))}),this.stream.onMessage(r=>{s(()=>this.onMessage(r))})}Mo(){this.state=5,this.xo.Ao(async()=>{this.state=0,this.start()})}Qo(e){return M("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _E extends Sf{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.It=i}jo(e,n){return this.Vo._o("Listen",e,n)}onMessage(e){this.xo.reset();const n=L0(this.It,e),s=function(r){if(!("targetChange"in r))return q.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?q.min():i.readTime?St(i.readTime):q.min()}(e);return this.listener.Wo(n,s)}zo(e){const n={};n.database=$o(this.It),n.addTarget=function(r,i){let o;const a=i.target;return o=Po(a)?{documents:V0(r,a)}:{query:U0(r,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=wf(r,i.resumeToken):i.snapshotVersion.compareTo(q.min())>0&&(o.readTime=jr(r,i.snapshotVersion.toTimestamp())),o}(this.It,e);const s=$0(this.It,e);s&&(n.labels=s),this.Bo(n)}Ho(e){const n={};n.database=$o(this.It),n.removeTarget=e,this.Bo(n)}}class CE extends Sf{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.Vo._o("Write",e,n)}onMessage(e){if(re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=F0(e.writeResults,e.commitTime),s=St(e.commitTime);return this.listener.Zo(s,n)}return re(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=$o(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>P0(this.It,s))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.Vo=s,this.It=r,this.nu=!1}su(){if(this.nu)throw new F(I.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.Vo.co(e,n,s,r,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new F(I.UNKNOWN,r.toString())})}fo(e,n,s,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.Vo.fo(e,n,s,i,o,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new F(I.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class SE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(kt(n),this.ou=!1):M("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr(o=>{s.enqueueAndForget(async()=>{Tn(this)&&(M("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=j(a);l._u.add(4),await Ys(l),l.gu.set("Unknown"),l._u.delete(4),await Ti(l)}(this))})}),this.gu=new SE(s,r)}}async function Ti(t){if(Tn(t))for(const e of t.wu)await e(!0)}async function Ys(t){for(const e of t.wu)await e(!1)}function Df(t,e){const n=j(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Wa(n)?za(n):ts(n).ko()&&Ka(n,e))}function Nf(t,e){const n=j(t),s=ts(n);n.du.delete(e),s.ko()&&kf(n,e),n.du.size===0&&(s.ko()?s.Fo():Tn(n)&&n.gu.set("Unknown"))}function Ka(t,e){t.yu.Ot(e.targetId),ts(t).zo(e)}function kf(t,e){t.yu.Ot(e),ts(t).Ho(e)}function za(t){t.yu=new N0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),se:e=>t.du.get(e)||null}),ts(t).start(),t.gu.uu()}function Wa(t){return Tn(t)&&!ts(t).No()&&t.du.size>0}function Tn(t){return j(t)._u.size===0}function xf(t){t.yu=void 0}async function NE(t){t.du.forEach((e,n)=>{Ka(t,e)})}async function kE(t,e){xf(t),Wa(t)?(t.gu.hu(e),za(t)):t.gu.set("Unknown")}async function xE(t,e,n){if(t.gu.set("Online"),e instanceof vf&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.du.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.du.delete(o),s.yu.removeTarget(o))}(t,e)}catch(s){M("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hr(t,s)}else if(e instanceof wr?t.yu.Gt(e):e instanceof yf?t.yu.Yt(e):t.yu.Wt(e),!n.isEqual(q.min()))try{const s=await Cf(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.yu.te(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.du.get(l);c&&r.du.set(l,c.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const l=r.du.get(a);if(!l)return;r.du.set(a,l.withResumeToken(Ne.EMPTY_BYTE_STRING,l.snapshotVersion)),kf(r,a);const c=new gn(l.target,a,1,l.sequenceNumber);Ka(r,c)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){M("RemoteStore","Failed to raise snapshot:",s),await Hr(t,s)}}async function Hr(t,e,n){if(!Ws(e))throw e;t._u.add(1),await Ys(t),t.gu.set("Offline"),n||(n=()=>Cf(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{M("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await Ti(t)})}function Mf(t,e){return e().catch(n=>Hr(t,n,e))}async function _i(t){const e=j(t),n=Wt(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;ME(e);)try{const r=await mE(e.localStore,s);if(r===null){e.fu.length===0&&n.Fo();break}s=r.batchId,RE(e,r)}catch(r){await Hr(e,r)}Rf(e)&&Of(e)}function ME(t){return Tn(t)&&t.fu.length<10}function RE(t,e){t.fu.push(e);const n=Wt(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function Rf(t){return Tn(t)&&!Wt(t).No()&&t.fu.length>0}function Of(t){Wt(t).start()}async function OE(t){Wt(t).eu()}async function LE(t){const e=Wt(t);for(const n of t.fu)e.Xo(n.mutations)}async function PE(t,e,n){const s=t.fu.shift(),r=$a.from(s,e,n);await Mf(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await _i(t)}async function FE(t,e){e&&Wt(t).Yo&&await async function(n,s){if(r=s.code,_0(r)&&r!==I.ABORTED){const i=n.fu.shift();Wt(n).Oo(),await Mf(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await _i(n)}var r}(t,e),Rf(t)&&Of(t)}async function xc(t,e){const n=j(t);n.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");const s=Tn(n);n._u.add(3),await Ys(n),s&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await Ti(n)}async function VE(t,e){const n=j(t);e?(n._u.delete(2),await Ti(n)):e||(n._u.add(2),await Ys(n),n.gu.set("Unknown"))}function ts(t){return t.pu||(t.pu=function(e,n,s){const r=j(e);return r.su(),new _E(n,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:NE.bind(null,t),Zr:kE.bind(null,t),Wo:xE.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Oo(),Wa(t)?za(t):t.gu.set("Unknown")):(await t.pu.stop(),xf(t))})),t.pu}function Wt(t){return t.Iu||(t.Iu=function(e,n,s){const r=j(e);return r.su(),new CE(n,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:OE.bind(null,t),Zr:FE.bind(null,t),tu:LE.bind(null,t),Zo:PE.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Oo(),await _i(t)):(await t.Iu.stop(),t.fu.length>0&&(M("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new Ga(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(I.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qa(t,e){if(kt("AsyncQueue",`${e}: ${t}`),Ws(t))return new F(I.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.comparator=e?(n,s)=>e(n,s)||L.comparator(n.key,s.key):(n,s)=>L.comparator(n.key,s.key),this.keyedMap=cs(),this.sortedSet=new we(this.comparator)}static emptySet(e){return new Pn(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Pn;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this.Tu=new we(L.comparator)}track(e){const n=e.doc.key,s=this.Tu.get(n);s?e.type!==0&&s.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&s.type!==1?this.Tu=this.Tu.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Tu=this.Tu.remove(n):e.type===1&&s.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):$():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,s)=>{e.push(s)}),e}}class qn{constructor(e,n,s,r,i,o,a,l){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,s,r){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new qn(e,n,Pn.emptySet(n),i,s,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.Au=void 0,this.listeners=[]}}class BE{constructor(){this.queries=new es(e=>ef(e),vi),this.onlineState="Unknown",this.Ru=new Set}}async function $E(t,e){const n=j(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new UE),r)try{i.Au=await n.onListen(s)}catch(o){const a=Qa(o,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&Ya(n)}async function jE(t,e){const n=j(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),r=i.listeners.length===0)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function HE(t,e){const n=j(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(r)&&(s=!0);o.Au=r}}s&&Ya(n)}function qE(t,e,n){const s=j(t),r=s.queries.get(e);if(r)for(const i of r.listeners)i.onError(n);s.queries.delete(e)}function Ya(t){t.Ru.forEach(e=>{e.next()})}class KE{constructor(e,n,s){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new qn(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Nu||!s)&&(!e.docs.isEmpty()||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=qn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this.key=e}}class Pf{constructor(e){this.key=e}}class zE{constructor(e,n){this.query=e,this.Lu=n,this.Uu=null,this.current=!1,this.qu=W(),this.mutatedKeys=W(),this.Ku=tf(e),this.Gu=new Pn(this.Ku)}get Qu(){return this.Lu}ju(e,n){const s=n?n.Wu:new Mc,r=n?n.Gu:this.Gu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,f)=>{const p=r.get(u),y=Ua(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;p&&y?p.data.isEqual(y.data)?_!==S&&(s.track({type:3,doc:y}),x=!0):this.zu(p,y)||(s.track({type:2,doc:y}),x=!0,(l&&this.Ku(y,l)>0||c&&this.Ku(y,c)<0)&&(a=!0)):!p&&y?(s.track({type:0,doc:y}),x=!0):p&&!y&&(s.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(y?(o=o.add(y),i=S?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),s.track({type:1,doc:u})}return{Gu:o,Wu:s,$i:a,mutatedKeys:i}}zu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const r=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const i=e.Wu.Eu();i.sort((c,u)=>function(f,p){const y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return y(f)-y(p)}(c.type,u.type)||this.Ku(c.doc,u.doc)),this.Hu(s);const o=n?this.Ju():[],a=this.qu.size===0&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,i.length!==0||l?{snapshot:new qn(this.query,e.Gu,r,i,e.mutatedKeys,a===0,l,!1),Yu:o}:{Yu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Mc,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(n=>this.Lu=this.Lu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Lu=this.Lu.delete(n)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=W(),this.Gu.forEach(s=>{this.Xu(s.key)&&(this.qu=this.qu.add(s.key))});const n=[];return e.forEach(s=>{this.qu.has(s)||n.push(new Pf(s))}),this.qu.forEach(s=>{e.has(s)||n.push(new Lf(s))}),n}Zu(e){this.Lu=e.Hi,this.qu=W();const n=this.ju(e.documents);return this.applyChanges(n,!0)}tc(){return qn.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,this.Uu===0)}}class WE{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class GE{constructor(e){this.key=e,this.ec=!1}}class QE{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new es(a=>ef(a),vi),this.ic=new Map,this.rc=new Set,this.oc=new we(L.comparator),this.uc=new Map,this.cc=new ja,this.ac={},this.hc=new Map,this.lc=Hn.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return this.fc===!0}}async function YE(t,e){const n=ob(t);let s,r;const i=n.sc.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.tc();else{const o=await yE(n.localStore,xt(e));n.isPrimaryClient&&Df(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,r=await XE(n,e,s,a==="current")}return r}async function XE(t,e,n,s){t.dc=(u,f,p)=>async function(y,_,S,x){let P=_.view.ju(S);P.$i&&(P=await Dc(y.localStore,_.query,!1).then(({documents:te})=>_.view.ju(te,P)));const ie=x&&x.targetChanges.get(_.targetId),oe=_.view.applyChanges(P,y.isPrimaryClient,ie);return Oc(y,_.targetId,oe.Yu),oe.snapshot}(t,u,f,p);const r=await Dc(t.localStore,e,!0),i=new zE(e,r.Hi),o=i.ju(r.documents),a=Qs.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline"),l=i.applyChanges(o,t.isPrimaryClient,a);Oc(t,n,l.Yu);const c=new WE(e,n,i);return t.sc.set(e,c),t.ic.has(n)?t.ic.get(n).push(e):t.ic.set(n,[e]),l.snapshot}async function JE(t,e){const n=j(t),s=n.sc.get(e),r=n.ic.get(s.targetId);if(r.length>1)return n.ic.set(s.targetId,r.filter(i=>!vi(i,e))),void n.sc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await jo(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),Nf(n.remoteStore,s.targetId),Ho(n,s.targetId)}).catch(zs)):(Ho(n,s.targetId),await jo(n.localStore,s.targetId,!0))}async function ZE(t,e,n){const s=ab(t);try{const r=await function(i,o){const a=j(i),l=ye.now(),c=o.reduce((p,y)=>p.add(y.key),W());let u,f;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=Mt(),_=W();return a.Gi.getEntries(p,c).next(S=>{y=S,y.forEach((x,P)=>{P.isValidDocument()||(_=_.add(x))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,y)).next(S=>{u=S;const x=[];for(const P of o){const ie=b0(P,u.get(P.key).overlayedDocument);ie!=null&&x.push(new Yt(P.key,ie,Xh(ie.value.mapValue),Et.exists(!0)))}return a.mutationQueue.addMutationBatch(p,l,x,o)}).next(S=>{f=S;const x=S.applyToLocalDocumentSet(u,_);return a.documentOverlayCache.saveOverlays(p,S.batchId,x)})}).then(()=>({batchId:f.batchId,changes:pf(u)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let l=i.ac[i.currentUser.toKey()];l||(l=new we(X)),l=l.insert(o,a),i.ac[i.currentUser.toKey()]=l}(s,r.batchId,n),await Xs(s,r.changes),await _i(s.remoteStore)}catch(r){const i=Qa(r,"Failed to persist write");n.reject(i)}}async function Ff(t,e){const n=j(t);try{const s=await pE(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.uc.get(i);o&&(re(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.ec=!0:r.modifiedDocuments.size>0?re(o.ec):r.removedDocuments.size>0&&(re(o.ec),o.ec=!1))}),await Xs(n,s,e)}catch(s){await zs(s)}}function Rc(t,e,n){const s=j(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.sc.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=j(i);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const f of u.listeners)f.bu(o)&&(l=!0)}),l&&Ya(a)}(s.eventManager,e),r.length&&s.nc.Wo(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function eb(t,e,n){const s=j(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.uc.get(e),i=r&&r.key;if(i){let o=new we(L.comparator);o=o.insert(i,Se.newNoDocument(i,q.min()));const a=W().add(i),l=new bi(q.min(),new Map,new ve(X),o,a);await Ff(s,l),s.oc=s.oc.remove(i),s.uc.delete(e),Xa(s)}else await jo(s.localStore,e,!1).then(()=>Ho(s,e,n)).catch(zs)}async function tb(t,e){const n=j(t),s=e.batch.batchId;try{const r=await dE(n.localStore,e);Uf(n,s,null),Vf(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Xs(n,r)}catch(r){await zs(r)}}async function nb(t,e,n){const s=j(t);try{const r=await function(i,o){const a=j(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(re(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(s.localStore,e);Uf(s,e,n),Vf(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Xs(s,r)}catch(r){await zs(r)}}function Vf(t,e){(t.hc.get(e)||[]).forEach(n=>{n.resolve()}),t.hc.delete(e)}function Uf(t,e,n){const s=j(t);let r=s.ac[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.ac[s.currentUser.toKey()]=r}}function Ho(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.ic.get(e))t.sc.delete(s),n&&t.nc._c(s,n);t.ic.delete(e),t.isPrimaryClient&&t.cc.ls(e).forEach(s=>{t.cc.containsKey(s)||Bf(t,s)})}function Bf(t,e){t.rc.delete(e.path.canonicalString());const n=t.oc.get(e);n!==null&&(Nf(t.remoteStore,n),t.oc=t.oc.remove(e),t.uc.delete(n),Xa(t))}function Oc(t,e,n){for(const s of n)s instanceof Lf?(t.cc.addReference(s.key,e),sb(t,s)):s instanceof Pf?(M("SyncEngine","Document no longer in limbo: "+s.key),t.cc.removeReference(s.key,e),t.cc.containsKey(s.key)||Bf(t,s.key)):$()}function sb(t,e){const n=e.key,s=n.path.canonicalString();t.oc.get(n)||t.rc.has(s)||(M("SyncEngine","New document in limbo: "+n),t.rc.add(s),Xa(t))}function Xa(t){for(;t.rc.size>0&&t.oc.size<t.maxConcurrentLimboResolutions;){const e=t.rc.values().next().value;t.rc.delete(e);const n=new L(ce.fromString(e)),s=t.lc.next();t.uc.set(s,new GE(n)),t.oc=t.oc.insert(n,s),Df(t.remoteStore,new gn(xt(Zh(n.path)),s,2,La.at))}}async function Xs(t,e,n){const s=j(t),r=[],i=[],o=[];s.sc.isEmpty()||(s.sc.forEach((a,l)=>{o.push(s.dc(l,e,n).then(c=>{if(c){s.isPrimaryClient&&s.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),r.push(c);const u=qa.Ci(l.targetId,c);i.push(u)}}))}),await Promise.all(o),s.nc.Wo(r),await async function(a,l){const c=j(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>b.forEach(l,f=>b.forEach(f.Si,p=>c.persistence.referenceDelegate.addReference(u,f.targetId,p)).next(()=>b.forEach(f.Di,p=>c.persistence.referenceDelegate.removeReference(u,f.targetId,p)))))}catch(u){if(!Ws(u))throw u;M("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const f=u.targetId;if(!u.fromCache){const p=c.Ui.get(f),y=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(y);c.Ui=c.Ui.insert(f,_)}}}(s.localStore,i))}async function rb(t,e){const n=j(t);if(!n.currentUser.isEqual(e)){M("SyncEngine","User change. New user:",e.toKey());const s=await _f(n.localStore,e);n.currentUser=e,function(r,i){r.hc.forEach(o=>{o.forEach(a=>{a.reject(new F(I.CANCELLED,i))})}),r.hc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Xs(n,s.ji)}}function ib(t,e){const n=j(t),s=n.uc.get(e);if(s&&s.ec)return W().add(s.key);{let r=W();const i=n.ic.get(e);if(!i)return r;for(const o of i){const a=n.sc.get(o);r=r.unionWith(a.view.Qu)}return r}}function ob(t){const e=j(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ff.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ib.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eb.bind(null,e),e.nc.Wo=HE.bind(null,e.eventManager),e.nc._c=qE.bind(null,e.eventManager),e}function ab(t){const e=j(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nb.bind(null,e),e}class lb{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=Ii(e.databaseInfo.databaseId),this.sharedClientState=this.mc(e),this.persistence=this.gc(e),await this.persistence.start(),this.localStore=this.yc(e),this.gcScheduler=this.Ic(e,this.localStore),this.indexBackfillerScheduler=this.Tc(e,this.localStore)}Ic(e,n){return null}Tc(e,n){return null}yc(e){return fE(this.persistence,new uE,e.initialUser,this.It)}gc(e){return new lE(Ha.Bs,this.It)}mc(e){return new wE}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Rc(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=rb.bind(null,this.syncEngine),await VE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new BE}createDatastore(e){const n=Ii(e.databaseInfo.databaseId),s=(r=e.databaseInfo,new TE(r));var r;return function(i,o,a,l){return new AE(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,r=e.asyncQueue,i=a=>Rc(this.syncEngine,a,0),o=kc.C()?new kc:new EE,new DE(n,s,r,i,o);var n,s,r,i,o}createSyncEngine(e,n){return function(s,r,i,o,a,l,c){const u=new QE(s,r,i,o,a,l);return c&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=j(e);M("RemoteStore","RemoteStore shutting down."),n._u.add(5),await Ys(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):kt("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=je.UNAUTHENTICATED,this.clientId=Wh.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async i=>{M("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(s,i=>(M("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(I.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Qa(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function fb(t,e){t.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await _f(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function db(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pb(t);M("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener(r=>xc(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xc(e.remoteStore,i)),t.onlineComponents=e}async function pb(t){return t.offlineComponents||(M("FirestoreClient","Using default OfflineComponentProvider"),await fb(t,new lb)),t.offlineComponents}async function $f(t){return t.onlineComponents||(M("FirestoreClient","Using default OnlineComponentProvider"),await db(t,new cb)),t.onlineComponents}function gb(t){return $f(t).then(e=>e.syncEngine)}async function mb(t){const e=await $f(t),n=e.eventManager;return n.onListen=YE.bind(null,e.syncEngine),n.onUnlisten=JE.bind(null,e.syncEngine),n}function yb(t,e,n={}){const s=new Bt;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,l){const c=new ub({next:f=>{i.enqueueAndForget(()=>jE(r,u)),f.fromCache&&a.source==="server"?l.reject(new F(I.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),u=new KE(o,c,{includeMetadataChanges:!0,Nu:!0});return $E(r,u)}(await mb(t),t.asyncQueue,e,n,s)),s.promise}const Lc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t,e,n){if(!n)throw new F(I.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vb(t,e,n,s){if(e===!0&&s===!0)throw new F(I.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pc(t){if(!L.isDocumentKey(t))throw new F(I.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fc(t){if(L.isDocumentKey(t))throw new F(I.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ja(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$()}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(I.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ja(t);throw new F(I.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new F(I.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,vb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(I.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(I.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vc(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Lw;switch(n.type){case"gapi":const s=n.client;return new Vw(s,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new F(I.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Lc.get(e);n&&(M("ComponentProvider","Removing Datastore"),Lc.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $t(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new We(this.firestore,e,this._key)}}class Ci{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ci(this.firestore,e,this._query)}}class $t extends Ci{constructor(e,n,s){super(e,n,Zh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new L(e))}withConverter(e){return new $t(this.firestore,e,this._path)}}function wb(t,e,...n){if(t=qt(t),jf("collection","path",e),t instanceof Za){const s=ce.fromString(e,...n);return Fc(s),new $t(t,null,s)}{if(!(t instanceof We||t instanceof $t))throw new F(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ce.fromString(e,...n));return Fc(s),new $t(t.firestore,null,s)}}function Eb(t,e,...n){if(t=qt(t),arguments.length===1&&(e=Wh.R()),jf("doc","path",e),t instanceof Za){const s=ce.fromString(e,...n);return Pc(s),new We(t,null,new L(s))}{if(!(t instanceof We||t instanceof $t))throw new F(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ce.fromString(e,...n));return Pc(s),new We(t.firestore,t instanceof $t?t.converter:null,new L(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Af(this,"async_queue_retry"),this.jc=()=>{const n=eo();n&&M("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.bo()};const e=eo();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const n=eo();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const n=new Bt;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}async Hc(){if(this.Bc.length!==0){try{await this.Bc[0](),this.Bc.shift(),this.xo.reset()}catch(e){if(!Ws(e))throw e;M("AsyncQueue","Operation failed with retryable error: "+e)}this.Bc.length>0&&this.xo.Ao(()=>this.Hc())}}zc(e){const n=this.$c.then(()=>(this.Kc=!0,e().catch(s=>{this.qc=s,this.Kc=!1;const r=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(s);throw kt("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.Kc=!1,s))));return this.$c=n,n}enqueueAfterDelay(e,n,s){this.Wc(),this.Qc.indexOf(e)>-1&&(n=0);const r=Ga.createAndSchedule(this,e,n,s,i=>this.Jc(i));return this.Uc.push(r),r}Wc(){this.qc&&$()}verifyOperationInProgress(){}async Yc(){let e;do e=this.$c,await e;while(e!==this.$c)}Xc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}class Ai extends Za{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new bb,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||qf(this),this._firestoreClient.terminate()}}function Ib(t,e){const n=typeof t=="object"?t:Ev(),s=typeof t=="string"?t:e||"(default)";return gv(n,"firestore").getImmediate({identifier:s})}function Hf(t){return t._firestoreClient||qf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qf(t){var e;const n=t._freezeSettings(),s=function(r,i,o,a){return new Qw(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new hb(t._authCredentials,t._appCheckCredentials,t._queue,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(I.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Me(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Ne.fromBase64String(e))}catch(n){throw new F(I.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn(Ne.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(I.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(I.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=/^__.*__$/;class _b{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Yt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gs(e,this.data,n,this.fieldTransforms)}}class Kf{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Yt(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}class Ni{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.It=s,this.ignoreUndefinedProperties=r,i===void 0&&this.ea(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new Ni(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.sa({path:s,ra:!1});return r.oa(e),r}ua(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.sa({path:s,ra:!1});return r.ea(),r}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return qr(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(e.length===0)throw this.aa("Document fields must not be empty");if(zf(this.na)&&Tb.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class Cb{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=s||Ii(e)}fa(e,n,s,r=!1){return new Ni({na:e,methodName:n,la:s,path:Me.emptyPath(),ra:!1,ha:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Wf(t){const e=t._freezeSettings(),n=Ii(t._databaseId);return new Cb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ab(t,e,n,s,r,i={}){const o=t.fa(i.merge||i.mergeFields?2:0,e,n,r);tl("Data must be an object, but it was:",o,s);const a=Gf(s,o);let l,c;if(i.merge)l=new et(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const p=qo(e,f,n);if(!o.contains(p))throw new F(I.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Yf(u,p)||u.push(p)}l=new et(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new _b(new He(a),l,c)}class ki extends Di{_toFieldTransform(e){if(e.na!==2)throw e.na===1?e.aa(`${this._methodName}() can only appear at the top level of your update data`):e.aa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ki}}function Sb(t,e,n){return new Ni({na:3,la:e.settings.la,methodName:t._methodName,ra:n},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Db extends Di{constructor(e,n){super(e),this.da=n}_toFieldTransform(e){const n=Sb(this,e,!0),s=this.da.map(i=>Js(i,n)),r=new jn(s);return new y0(e.path,r)}isEqual(e){return this===e}}function Nb(t,e,n,s){const r=t.fa(1,e,n);tl("Data must be an object, but it was:",r,s);const i=[],o=He.empty();In(s,(l,c)=>{const u=nl(e,l,n);c=qt(c);const f=r.ua(u);if(c instanceof ki)i.push(u);else{const p=Js(c,f);p!=null&&(i.push(u),o.set(u,p))}});const a=new et(i);return new Kf(o,a,r.fieldTransforms)}function kb(t,e,n,s,r,i){const o=t.fa(1,e,n),a=[qo(e,s,n)],l=[r];if(i.length%2!=0)throw new F(I.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(qo(e,i[p])),l.push(i[p+1]);const c=[],u=He.empty();for(let p=a.length-1;p>=0;--p)if(!Yf(c,a[p])){const y=a[p];let _=l[p];_=qt(_);const S=o.ua(y);if(_ instanceof ki)c.push(y);else{const x=Js(_,S);x!=null&&(c.push(y),u.set(y,x))}}const f=new et(c);return new Kf(u,f,o.fieldTransforms)}function Js(t,e){if(Qf(t=qt(t)))return tl("Unsupported field value:",e,t),Gf(t,e);if(t instanceof Di)return function(n,s){if(!zf(s.na))throw s.aa(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.aa(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ra&&e.na!==4)throw e.aa("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=Js(o,s.ca(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=qt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return p0(s.It,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=ye.fromDate(n);return{timestampValue:jr(s.It,r)}}if(n instanceof ye){const r=new ye(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:jr(s.It,r)}}if(n instanceof el)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof zn)return{bytesValue:wf(s.It,n._byteString)};if(n instanceof We){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.aa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Ba(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s.aa(`Unsupported field value: ${Ja(n)}`)}(t,e)}function Gf(t,e){const n={};return Gh(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):In(t,(s,r)=>{const i=Js(r,e.ia(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Qf(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ye||t instanceof el||t instanceof zn||t instanceof We||t instanceof Di)}function tl(t,e,n){if(!Qf(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=Ja(n);throw s==="an object"?e.aa(t+" a custom object"):e.aa(t+" "+s)}}function qo(t,e,n){if((e=qt(e))instanceof Si)return e._internalPath;if(typeof e=="string")return nl(t,e);throw qr("Field path arguments must be of type string or ",t,!1,void 0,n)}const xb=new RegExp("[~\\*/\\[\\]]");function nl(t,e,n){if(e.search(xb)>=0)throw qr(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Si(...e.split("."))._internalPath}catch{throw qr(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qr(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new F(I.INVALID_ARGUMENT,a+t+l)}function Yf(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Mb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Mb extends Xf{data(){return super.data()}}function Jf(t,e){return typeof e=="string"?nl(t,e):e instanceof Si?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rb extends Xf{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Er(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Jf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Er extends Rb{data(e={}){return super.data(e)}}class Ob{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new fr(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Er(this._firestore,this._userDataWriter,s.key,s,new fr(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(I.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>({type:"added",doc:new Er(s._firestore,s._userDataWriter,o.doc.key,o.doc,new fr(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:i++}))}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new Er(s._firestore,s._userDataWriter,o.doc.key,o.doc,new fr(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,c=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),c=i.indexOf(o.doc.key)),{type:Lb(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Lb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(I.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{convertValue(e,n="none"){switch(wn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw $()}}convertObject(e,n){const s={};return In(e.fields,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertGeoPoint(e){return new el(ge(e.latitude),ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Yh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(xs(e));default:return null}}convertTimestamp(e){const n=zt(e);return new ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ce.fromString(e);re(Tf(s));const r=new Ms(s.get(1),s.get(3)),i=new L(s.popFirst(5));return r.isEqual(n)||kt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Ub extends Fb{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}function Bb(t){t=Kn(t,Ci);const e=Kn(t.firestore,Ai),n=Hf(e),s=new Ub(e);return Pb(t._query),yb(n,t._query).then(r=>new Ob(e,s,t,r))}function $b(t,e,n){t=Kn(t,We);const s=Kn(t.firestore,Ai),r=Vb(t.converter,e,n);return Zf(s,[Ab(Wf(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Et.none())])}function jb(t,e,n,...s){t=Kn(t,We);const r=Kn(t.firestore,Ai),i=Wf(r);let o;return o=typeof(e=qt(e))=="string"||e instanceof Si?kb(i,"updateDoc",t._key,e,n,s):Nb(i,"updateDoc",t._key,e),Zf(r,[o.toMutation(t._key,Et.exists(!0))])}function Zf(t,e){return function(n,s){const r=new Bt;return n.asyncQueue.enqueueAndForget(async()=>ZE(await gb(n),s,r)),r.promise}(Hf(t),e)}function Hb(...t){return new Db("arrayUnion",t)}(function(t,e=!0){(function(n){Zn=n})(vv),Nr(new Ts("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new Ai(new Pw(n.getProvider("auth-internal")),new Bw(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new F(I.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ms(a.options.projectId,l)}(i,s),i);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),On(lc,"3.5.0",t),On(lc,"3.5.0","esm2017")})();Ng(hy).mount("#app");const qb={apiKey:"AIzaSyA6aDMxjEsPa3eqfAGziOWuqZAzY62xbuo",authDomain:"gymnasiearbete-94f01.firebaseapp.com",projectId:"gymnasiearbete-94f01",storageBucket:"gymnasiearbete-94f01.appspot.com",messagingSenderId:"643209427896",appId:"1:643209427896:web:880d6eb21a0285f23eed4d"},Kb=wv(qb),zb=Ib(Kb),vt={doc:Eb,collection:wb,setDoc:$b,getDocs:Bb,updateDoc:jb,arrayUnion:Hb,db:zb};
